<HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1"><META NAME="Generator" CONTENT="Microsoft Word 97/98"><TITLE>21_Understanding Csound&#146;s Spectral Data Types (Figures)</TITLE></HEAD><BODY><DIR><DIR><B><FONT SIZE=5><P>21&#9;Understanding Csound&#146;s Spectral Data Types (figures)</P></B></FONT></DIR></DIR><B><FONT SIZE=5><P>Barry Vercoe</P></B></FONT><TABLE CELLSPACING=0 BORDER=0 CELLPADDING=5 WIDTH=478><TR><TD WIDTH="33%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>Entering:</FONT></TD><TD WIDTH="15%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>wsig</FONT></TD><TD WIDTH="14%" VALIGN="TOP"><B><FONT FACE="Courier New" SIZE=2><P>spectrum</B></FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>asig,</FONT></TD><TD WIDTH="27%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>...</FONT></TD></TR><TR><TD VALIGN="TOP" COLSPAN=5>&nbsp;</TD></TR><TR><TD WIDTH="33%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>Processing and Viewing:</FONT></TD><TD WIDTH="15%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>wsig</FONT></TD><TD WIDTH="14%" VALIGN="TOP"><B><FONT FACE="Courier New" SIZE=2><P>specaddm</B></FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>wsig,</FONT></TD><TD WIDTH="27%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>...</FONT></TD></TR><TR><TD WIDTH="33%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="15%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>wsig</FONT></TD><TD WIDTH="14%" VALIGN="TOP"><B><FONT FACE="Courier New" SIZE=2><P>specdiff</B></FONT></TD><TD WIDTH="38%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>wsig</FONT></TD></TR><TR><TD WIDTH="33%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="15%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>wsig</FONT></TD><TD WIDTH="14%" VALIGN="TOP"><B><FONT FACE="Courier New" SIZE=2><P>specscal</B></FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>wsig,</FONT></TD><TD WIDTH="27%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>...</FONT></TD></TR><TR><TD WIDTH="33%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="15%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>wsig</FONT></TD><TD WIDTH="14%" VALIGN="TOP"><B><FONT FACE="Courier New" SIZE=2><P>spechist</B></FONT></TD><TD WIDTH="38%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>wsig</FONT></TD></TR><TR><TD WIDTH="33%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="15%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>wsig</FONT></TD><TD WIDTH="14%" VALIGN="TOP"><B><FONT FACE="Courier New" SIZE=2><P>specfilt</B></FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>wsig,</FONT></TD><TD WIDTH="27%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>...</FONT></TD></TR><TR><TD WIDTH="33%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="15%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="14%" VALIGN="TOP"><B><FONT FACE="Courier New" SIZE=2><P>specdisp</B></FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>wsig,</FONT></TD><TD WIDTH="27%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>...</FONT></TD></TR><TR><TD VALIGN="TOP" COLSPAN=5>&nbsp;</TD></TR><TR><TD WIDTH="33%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>Leaving:</FONT></TD><TD WIDTH="15%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>koct, kamp</FONT></TD><TD WIDTH="14%" VALIGN="TOP"><B><FONT FACE="Courier New" SIZE=2><P>specptrk</B></FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>wsig,</FONT></TD><TD WIDTH="27%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>...</FONT></TD></TR><TR><TD WIDTH="33%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="15%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>ksum</FONT></TD><TD WIDTH="14%" VALIGN="TOP"><B><FONT FACE="Courier New" SIZE=2><P>specsum</B></FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>wsig,</FONT></TD><TD WIDTH="27%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>...</FONT></TD></TR></TABLE><B><FONT FACE="Geneva" SIZE=1><P>Figure 21.1</B> Csound&#146;s spectral data type opcodes.</P></FONT><FONT FACE="Palatino" SIZE=2><P>&nbsp;</P></FONT><P>&nbsp;</P><FONT SIZE=2><P><IMG SRC="Image1.gif" WIDTH=143 HEIGHT=280></P></FONT><B><FONT FACE="Geneva" SIZE=1><P>Figure 21.2 </B>Block diagram of <I>instr 2101</I>, a beat tracker and tempo follower.</P></FONT><FONT FACE="Palatino" SIZE=2><P>&nbsp;</P></FONT><P>&nbsp;</P><TABLE CELLSPACING=0 BORDER=0 CELLPADDING=5 WIDTH=478><TR><TD WIDTH="11%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>instr</FONT></TD><TD WIDTH="15%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>2101</FONT></TD><TD WIDTH="61%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>; beat tracker, tempo follower</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>asig</FONT></TD><TD WIDTH="45%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>in</FONT></TD><TD WIDTH="44%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; get microphone input</FONT></TD></TR><TR><TD WIDTH="56%" VALIGN="TOP" COLSPAN=4>&nbsp;</TD><TD WIDTH="44%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; form a spectral data type</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>wsig1</FONT></TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>spectrum</FONT></TD><TD WIDTH="76%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>asig, .01, 8, 12, 8, 0, 1, 0</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>wsig2</FONT></TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>specscal</FONT></TD><TD WIDTH="32%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>wsig1, 3, 4</FONT></TD><TD WIDTH="44%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; Fletcher-Munson scaling</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>wsig3</FONT></TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>specdiff</FONT></TD><TD WIDTH="32%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>wsig2</FONT></TD><TD WIDTH="44%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; positive difference spectrum</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>wsig4</FONT></TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>specfilt</FONT></TD><TD WIDTH="32%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>wsig3, 5</FONT></TD><TD WIDTH="44%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; inject into integrating filters</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>ksum4</FONT></TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>specsum</FONT></TD><TD WIDTH="76%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>wsig4, 1</FONT></TD></TR><TR><TD WIDTH="56%" VALIGN="TOP" COLSPAN=4>&nbsp;</TD><TD WIDTH="44%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; get tempo...</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>ktempo</FONT></TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>tempest</FONT></TD><TD WIDTH="76%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>ksum4, .01, .1, 3, 1, 30, .005, 90, 2, .04, 1</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>tempo</FONT></TD><TD WIDTH="32%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>ktempo, 60</FONT></TD><TD WIDTH="44%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; ... AND control the performance</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="89%" VALIGN="TOP" COLSPAN=4><FONT FACE="Courier New" SIZE=2><P>endin</FONT></TD></TR></TABLE><B><FONT FACE="Geneva" SIZE=1><P>Figure 21.3 </B>Orchestra code for <I>instr 2101</I>, an instrument for taking microphone input and controlling the tempo of the performance based on beat tracking.</P></FONT><FONT FACE="Geneva" SIZE=1><P>&nbsp;</P></FONT><P>&nbsp;</P><FONT SIZE=2><P><IMG SRC="Image2.gif" WIDTH=104 HEIGHT=184></P></FONT><B><FONT FACE="Geneva" SIZE=1><P>Figure 21.4</B> Block diagram of <I>instr 2102</I>, a pitch tracker and harmonizer.</P></FONT><FONT FACE="Geneva" SIZE=1><P>&nbsp;</P></FONT><P>&nbsp;</P><TABLE CELLSPACING=0 BORDER=0 CELLPADDING=5 WIDTH=491><TR><TD WIDTH="15%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>instr</FONT></TD><TD WIDTH="16%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>2102</FONT></TD><TD WIDTH="57%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>; pitch tracking harmonizer</FONT></TD></TR><TR><TD WIDTH="15%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>a1, a0</FONT></TD><TD WIDTH="47%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>ins</FONT></TD><TD WIDTH="38%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; get microphone input</FONT></TD></TR><TR><TD WIDTH="15%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>a1</FONT></TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>reson</FONT></TD><TD WIDTH="34%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>a1, 0, 3000, 1</FONT></TD><TD WIDTH="38%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; and apply some EQ</FONT></TD></TR><TR><TD WIDTH="15%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>w1</FONT></TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>spectrum</FONT></TD><TD WIDTH="34%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>a1, .02, 6, 24, 12, 1, 3</FONT></TD><TD WIDTH="38%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; form a spectral data type</FONT></TD></TR><TR><TD WIDTH="62%" VALIGN="TOP" COLSPAN=4>&nbsp;</TD><TD WIDTH="38%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; find the pitch</FONT></TD></TR><TR><TD WIDTH="15%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>koct, kamp</FONT></TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>specptrk</FONT></TD><TD WIDTH="72%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>w1, 1, 6.5, 8.9, 7.5, 10, 7, .7, 0, 3, 1, .1</FONT></TD></TR><TR><TD WIDTH="15%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>a2</FONT></TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>delay</FONT></TD><TD WIDTH="34%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>a1, .066</FONT></TD><TD WIDTH="38%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; time align pitch and audio</FONT></TD></TR><TR><TD WIDTH="62%" VALIGN="TOP" COLSPAN=4>&nbsp;</TD><TD WIDTH="38%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; add 4 new parts</FONT></TD></TR><TR><TD WIDTH="15%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>a3</FONT></TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>harmon4</FONT></TD><TD WIDTH="72%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>a2, koct, 1.25, .75, 1.5, 1.875, 0, 6.5</FONT></TD></TR><TR><TD WIDTH="15%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>outs</FONT></TD><TD WIDTH="34%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>a2, a3</FONT></TD><TD WIDTH="38%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; and send all 5 to output</FONT></TD></TR><TR><TD WIDTH="15%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="85%" VALIGN="TOP" COLSPAN=4><FONT FACE="Courier New" SIZE=2><P>endin</FONT></TD></TR></TABLE><B><FONT FACE="Geneva" SIZE=1><P>Figure 21.5</B> Orchestra code for <I>instr 2102</I>, a pitch tracking harmonizer instrument shown in figure 21.4</P></FONT></BODY></HTML>