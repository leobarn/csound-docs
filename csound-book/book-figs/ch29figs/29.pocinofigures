<HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1"><META NAME="Generator" CONTENT="Microsoft Word 97/98"><TITLE>29_Efficient Implementation of Analog Waveshaping in Csound (figures)</TITLE></HEAD><BODY><DIR><DIR><B><FONT SIZE=5><P>29&#9;Efficient Implementation of Analog Waveshaping in Csound (figures)</P></B></FONT></DIR></DIR><B><FONT SIZE=5><P>Michael A. Pocino</P></B></FONT><FONT FACE="Geneva" SIZE=1><P><A NAME="_960905129"></A><IMG SRC="Image1.gif" WIDTH=215 HEIGHT=161></P></FONT><B><FONT FACE="Geneva" SIZE=1><P>Figure 29.1</B> A guitar signal (dashed line) is fed through a comparator with reference 0. The output is shown as a solid line.</P></FONT><FONT FACE="Times"><P>&nbsp;</P></FONT><P>&nbsp;</P><TABLE CELLSPACING=0 BORDER=0 CELLPADDING=5 WIDTH=479><TR><TD WIDTH="11%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>instr</FONT></TD><TD WIDTH="16%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>2901</FONT></TD><TD WIDTH="61%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>; pulse wave with modulatable pulse-width</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>iatk</FONT></TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="77%" VALIGN="TOP" COLSPAN=6><FONT FACE="Courier New" SIZE=2><P>.2</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>idec</FONT></TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="77%" VALIGN="TOP" COLSPAN=6><FONT FACE="Courier New" SIZE=2><P>.1</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>isus</FONT></TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="77%" VALIGN="TOP" COLSPAN=6><FONT FACE="Courier New" SIZE=2><P>.8</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>irel</FONT></TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="77%" VALIGN="TOP" COLSPAN=6><FONT FACE="Courier New" SIZE=2><P>.2</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>istdy</FONT></TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>= </FONT></TD><TD WIDTH="41%" VALIGN="TOP" COLSPAN=5><FONT FACE="Courier New" SIZE=2><P>1-(iatk+idec+irel)</FONT></TD><TD WIDTH="36%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; length of sustain level</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>alfo</FONT></TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>oscili</FONT></TD><TD WIDTH="41%" VALIGN="TOP" COLSPAN=5><FONT FACE="Courier New" SIZE=2><P>0.2, p6, 3</FONT></TD><TD WIDTH="36%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; p6=lfo rate</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>apw</FONT></TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="77%" VALIGN="TOP" COLSPAN=6><FONT FACE="Courier New" SIZE=2><P>alfo+0.25</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>asaw</FONT></TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>oscili</FONT></TD><TD WIDTH="41%" VALIGN="TOP" COLSPAN=5><FONT FACE="Courier New" SIZE=2><P>1, p5, 2</FONT></TD><TD WIDTH="36%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; p5=freq in Hz</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>apulse</FONT></TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>table</FONT></TD><TD WIDTH="77%" VALIGN="TOP" COLSPAN=6><FONT FACE="Courier New" SIZE=2><P>asaw-apw, 1, 1, 0.5</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>kenv</FONT></TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>linseg</FONT></TD><TD WIDTH="77%" VALIGN="TOP" COLSPAN=6><FONT FACE="Courier New" SIZE=2><P>0, p3*iatk, 1, p3*idec, isus, p3*istdy, isus, p3*irel, 0</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>out</FONT></TD><TD WIDTH="77%" VALIGN="TOP" COLSPAN=6><FONT FACE="Courier New" SIZE=2><P>p4*apulse*kenv</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="89%" VALIGN="TOP" COLSPAN=8><FONT FACE="Courier New" SIZE=2><P>endin</FONT></TD></TR><TR><TD VALIGN="TOP" COLSPAN=9>&nbsp;</TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>f 1</FONT></TD><TD WIDTH="7%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>0</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>32</FONT></TD><TD WIDTH="9%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>7</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>-1</FONT></TD><TD WIDTH="22%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>16 -1 0 1 16 1</FONT></TD><TD WIDTH="36%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; table for comparator</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>f 2</FONT></TD><TD WIDTH="7%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>0</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>256</FONT></TD><TD WIDTH="9%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>7</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>-1</FONT></TD><TD WIDTH="22%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>256 1</FONT></TD><TD WIDTH="36%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; sawtooth waveform</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>f 3</FONT></TD><TD WIDTH="7%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>0</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>1024</FONT></TD><TD WIDTH="9%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>10</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>1</FONT></TD><TD WIDTH="22%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="36%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; sine wave for lfo</FONT></TD></TR><TR><TD VALIGN="TOP" COLSPAN=9>&nbsp;</TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>i 2901</FONT></TD><TD WIDTH="7%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>0</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>6</FONT></TD><TD WIDTH="9%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>6000</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>110</FONT></TD><TD WIDTH="58%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>.5</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>i 2901</FONT></TD><TD WIDTH="7%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>0</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>6</FONT></TD><TD WIDTH="9%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>6000</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>165</FONT></TD><TD WIDTH="58%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>.5</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>i 2901</FONT></TD><TD WIDTH="7%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>1</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>5</FONT></TD><TD WIDTH="9%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>6000</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>55</FONT></TD><TD WIDTH="58%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>1</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>i 2901</FONT></TD><TD WIDTH="7%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>1</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>5</FONT></TD><TD WIDTH="9%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>4000</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>440</FONT></TD><TD WIDTH="58%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>1</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>i 2901</FONT></TD><TD WIDTH="7%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>1</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>5</FONT></TD><TD WIDTH="9%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>4000</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>220</FONT></TD><TD WIDTH="58%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>1</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>i 2901</FONT></TD><TD WIDTH="7%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>1</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>5</FONT></TD><TD WIDTH="9%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>4000</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>660</FONT></TD><TD WIDTH="58%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>1</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>i 2901</FONT></TD><TD WIDTH="7%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>1</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>5</FONT></TD><TD WIDTH="9%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>4000</FONT></TD><TD WIDTH="8%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>330</FONT></TD><TD WIDTH="58%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>1</FONT></TD></TR></TABLE><B><FONT FACE="Geneva" SIZE=1><P>Figure 29.2</B> Orchestra and score code for <I>instr 2901</I>, an instrument which uses a sawtooth waveform and table-lookup comparator to realize a pulse wave with modulatable pulse-width.</P></FONT><FONT FACE="Times"><P>&nbsp;</P></FONT><P>&nbsp;</P><FONT FACE="Times"><P><A NAME="_934194080"></A><IMG SRC="Image2.gif" WIDTH=215 HEIGHT=256></P></FONT><B><FONT FACE="Geneva" SIZE=1><P>Figure 29.3</B> A rectangular waveform of varying pulse-width. A sawtooth waveform (dashed) is fed through a comparator with a varying reference (dash-dot) which controls the pulse-width. The output waveform (solid) is a pulse wave.</P></FONT><FONT FACE="Times"><P>&nbsp;</P></FONT><P>&nbsp;</P><TABLE CELLSPACING=0 BORDER=0 CELLPADDING=5 WIDTH=477><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>aagtb</FONT></TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>table</FONT></TD><TD WIDTH="76%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>asiga-asigb, 1, 1, 0.5</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>acgtd</FONT></TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>table</FONT></TD><TD WIDTH="76%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>asigc-asigd, 1, 1, 0.5</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>aand</FONT></TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="76%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>aagtb*acgtd</FONT></TD></TR><TR><TD VALIGN="TOP" COLSPAN=6>&nbsp;</TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>f 1</FONT></TD><TD WIDTH="6%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>0</FONT></TD><TD WIDTH="7%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>32</FONT></TD><TD WIDTH="8%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>7</FONT></TD><TD WIDTH="68%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>0 16 0 0 1 16 1</FONT></TD></TR></TABLE><B><FONT FACE="Geneva" SIZE=1><P>Figure 29.4</B> Using tables to generate the &quot;and&quot; function  &quot;a &gt; b &amp;&amp; c &gt; d.&quot;</P></FONT><FONT FACE="Palatino" SIZE=2><P>&nbsp;</P></FONT><P>&nbsp;</P><TABLE CELLSPACING=0 BORDER=0 CELLPADDING=5 WIDTH=477><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>aagtb</FONT></TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>table</FONT></TD><TD WIDTH="76%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>asiga-asigb, 1, 1, 0.5</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>acgtd</FONT></TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>table</FONT></TD><TD WIDTH="76%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>asigc-asigd, 1, 1, 0.5</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>aor1</FONT></TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="76%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>aagtb+acgtd</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>aor</FONT></TD><TD WIDTH="12%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>table</FONT></TD><TD WIDTH="76%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>aor1, 1, 1, 0.25</FONT></TD></TR><TR><TD VALIGN="TOP" COLSPAN=6>&nbsp;</TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>f 1</FONT></TD><TD WIDTH="6%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>0</FONT></TD><TD WIDTH="7%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>32</FONT></TD><TD WIDTH="8%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>7</FONT></TD><TD WIDTH="68%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>0 16 0 0 1 16 1</FONT></TD></TR></TABLE><B><FONT FACE="Geneva" SIZE=1><P>Figure 29.5</B> Using tables to generate the &quot;or&quot; function  &quot;a &gt; b || c &gt; d.&quot;</P></FONT><FONT FACE="Palatino" SIZE=2><P>&nbsp;</P></FONT><P>&nbsp;</P><TABLE CELLSPACING=0 BORDER=0 CELLPADDING=5 WIDTH=477><TR><TD WIDTH="17%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>kpwr</FONT></TD><TD WIDTH="17%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>rms</FONT></TD><TD WIDTH="65%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>ain</FONT></TD></TR><TR><TD WIDTH="17%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>apos</FONT></TD><TD WIDTH="17%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>table</FONT></TD><TD WIDTH="65%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>ain-ithr*kpwr, 1, 1, 0.5</FONT></TD></TR><TR><TD WIDTH="17%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>aneg</FONT></TD><TD WIDTH="17%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>table</FONT></TD><TD WIDTH="65%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>ithr*kpwr-ain, 1, 1, 0.5</FONT></TD></TR><TR><TD WIDTH="17%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>agate</FONT></TD><TD WIDTH="17%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="65%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>apos+aneg</FONT></TD></TR><TR><TD WIDTH="17%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>aset</FONT></TD><TD WIDTH="17%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="65%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>apos-aneg</FONT></TD></TR><TR><TD WIDTH="17%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>aschmitt</FONT></TD><TD WIDTH="17%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>samphold</FONT></TD><TD WIDTH="65%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>aset, agate</FONT></TD></TR></TABLE><B><FONT FACE="Geneva" SIZE=1><P>Figure 29.6</B> Orchestra code excerpt from <I>instr 2904 </I>for the generation of an adaptive &quot;Schmitt&quot; trigger for counting zero crossings.</P></FONT><FONT FACE="Times"><P>&nbsp;</P></FONT><P>&nbsp;</P><FONT FACE="Times"><P><A NAME="_960905661"></A><IMG SRC="Image3.gif" WIDTH=212 HEIGHT=160></P></FONT><B><FONT FACE="Geneva" SIZE=1><P>Figure 29.7</B> A guitar signal (dashed) is passed through the Schmitt trigger. Dash-dot lines designate the thresholds. The output (solid) is only positive or negative during positive or negative parts (respectively) of each cycle.</P></FONT><FONT FACE="Palatino" SIZE=2><P>&nbsp;</P></FONT><P>&nbsp;</P><FONT FACE="Times"><P><A NAME="_960905705"></A><IMG SRC="Image4.gif" WIDTH=216 HEIGHT=163></P></FONT><B><FONT FACE="Geneva" SIZE=1><P>Figure 29.8</B> The output of the adaptive Schmitt trigger (solid line) is compared to the original guitar</P></FONT><FONT FACE="Palatino" SIZE=2><P>&nbsp;</P></FONT><P>&nbsp;</P><FONT FACE="Times"><P><A NAME="_960905799"></A><IMG SRC="Image5.gif" WIDTH=212 HEIGHT=160></P></FONT><B><FONT FACE="Geneva" SIZE=1><P>Figure 29.9</B> The output of the &quot;divide-by-two-counter&quot; compared to the input guitar signal.</P></FONT><FONT FACE="Palatino" SIZE=2><P>&nbsp;</P></FONT><P>&nbsp;</P><FONT FACE="Geneva" SIZE=1><P><A NAME="_960905872"></A><IMG SRC="Image6.gif" WIDTH=212 HEIGHT=160></P></FONT><B><FONT FACE="Geneva" SIZE=1><P>Figure 29.10</B> The final sub-octave output is the same as the guitar input, but inverted every other cycle. The result sounds one octave lower.</P></FONT><FONT FACE="Palatino" SIZE=2><P>&nbsp;</P></FONT><P>&nbsp;</P><TABLE CELLSPACING=0 BORDER=0 CELLPADDING=5 WIDTH=478><TR><TD WIDTH="11%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>instr</FONT></TD><TD WIDTH="16%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>2904</FONT></TD><TD WIDTH="58%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>; sub-octave generator</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>idlev</FONT></TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="19%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>1.0</FONT></TD><TD WIDTH="54%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; direct guitar level</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>isublev</FONT></TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="19%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>0.4</FONT></TD><TD WIDTH="54%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; sub-octave signal level</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>istl</FONT></TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="19%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>0.4</FONT></TD><TD WIDTH="54%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; schmidtt trigger level for square wave</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>iincr</FONT></TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="19%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>sr/8</FONT></TD><TD WIDTH="54%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; for incrementing divide-by-two-counter</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>ain</FONT></TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>soundin</FONT></TD><TD WIDTH="19%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>"guitar1.aif"</FONT></TD><TD WIDTH="54%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; sound file to be processed</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>alpf</FONT></TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>butterlp</FONT></TD><TD WIDTH="19%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>ain, 700</FONT></TD><TD WIDTH="54%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; 700 Hz LPF</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>kpwr</FONT></TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>rms</FONT></TD><TD WIDTH="73%" VALIGN="TOP" COLSPAN=4><FONT FACE="Courier New" SIZE=2><P>alpf</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>ahigh</FONT></TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>table</FONT></TD><TD WIDTH="73%" VALIGN="TOP" COLSPAN=4><FONT FACE="Courier New" SIZE=2><P>(alpf-istl*kpwr)/5000+16, 2</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>alow</FONT></TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>table</FONT></TD><TD WIDTH="73%" VALIGN="TOP" COLSPAN=4><FONT FACE="Courier New" SIZE=2><P>(-alpf-istl*kpwr)/5000+16, 2</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>asqr1</FONT></TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>samphold</FONT></TD><TD WIDTH="73%" VALIGN="TOP" COLSPAN=4><FONT FACE="Courier New" SIZE=2><P>ahigh-alow, ahigh+alow</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>adela</FONT></TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>delay1</FONT></TD><TD WIDTH="73%" VALIGN="TOP" COLSPAN=4><FONT FACE="Courier New" SIZE=2><P>asqr1</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>agate</FONT></TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="73%" VALIGN="TOP" COLSPAN=4><FONT FACE="Courier New" SIZE=2><P>-asqr1+adela</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>aphs</FONT></TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>phasor</FONT></TD><TD WIDTH="73%" VALIGN="TOP" COLSPAN=4><FONT FACE="Courier New" SIZE=2><P>abs(agate*iincr)</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>asub1</FONT></TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>table</FONT></TD><TD WIDTH="73%" VALIGN="TOP" COLSPAN=4><FONT FACE="Courier New" SIZE=2><P>aphs, 1, 1</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>asub2</FONT></TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>tone</FONT></TD><TD WIDTH="73%" VALIGN="TOP" COLSPAN=4><FONT FACE="Courier New" SIZE=2><P>asub1, 3000</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>asub</FONT></TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="73%" VALIGN="TOP" COLSPAN=4><FONT FACE="Courier New" SIZE=2><P>asub2*ain</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>aout</FONT></TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>butterlp</FONT></TD><TD WIDTH="73%" VALIGN="TOP" COLSPAN=4><FONT FACE="Courier New" SIZE=2><P>asub, 600</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="15%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>out</FONT></TD><TD WIDTH="73%" VALIGN="TOP" COLSPAN=4><FONT FACE="Courier New" SIZE=2><P>0.5*(isublev*aout+idlev*ain)</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="89%" VALIGN="TOP" COLSPAN=6><FONT FACE="Courier New" SIZE=2><P>endin</FONT></TD></TR><TR><TD VALIGN="TOP" COLSPAN=7>&nbsp;</TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>f 1</FONT></TD><TD WIDTH="8%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>0</FONT></TD><TD WIDTH="8%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>2</FONT></TD><TD WIDTH="7%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>2</FONT></TD><TD WIDTH="67%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>-1 1</FONT></TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>f 2</FONT></TD><TD WIDTH="8%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>0</FONT></TD><TD WIDTH="8%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>32</FONT></TD><TD WIDTH="7%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>7</FONT></TD><TD WIDTH="67%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P> 0 16 0 0 1 16 1</FONT></TD></TR><TR><TD VALIGN="TOP" COLSPAN=7>&nbsp;</TD></TR><TR><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>i 2904</FONT></TD><TD WIDTH="8%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>0</FONT></TD><TD WIDTH="8%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>15</FONT></TD><TD WIDTH="73%" VALIGN="TOP" COLSPAN=4><FONT FACE="Courier New" SIZE=2><P>; p3 should be long enough for the soundin</FONT></TD></TR></TABLE><B><FONT FACE="Geneva" SIZE=1><P>Figure 29.11</B> Orchestra and score code for <I>instr 3404</I>, a guitar sub-octave generator instrument.</P></FONT></BODY></HTML>