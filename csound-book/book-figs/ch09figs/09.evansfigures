<HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1"><META NAME="Generator" CONTENT="Microsoft Word 97/98"><TITLE>9_FM Synthesis and Morphing in Csound: from Percussion to Brass (figures).</TITLE></HEAD><BODY><DIR><DIR><B><FONT SIZE=5><P>9&#9;FM Synthesis and Morphing in Csound: from Percussion to Brass (figures)</P></FONT></DIR></DIR><FONT SIZE=5><P>Brian Evans</P></B></FONT><FONT SIZE=2><P><IMG SRC="Image1.gif" WIDTH=286 HEIGHT=179></P></FONT><B><FONT FACE="Geneva" SIZE=1><P>Figure 9.1</B> An analog synthesis patch that adds an output voltage from an LFO to the voltage controlling the frequency of a VCO. For FM synthesis, the LFO can be replaced with a VCO allowing for modulating frequencies within the audio spectrum (greater that 20 Hz).</P></FONT><FONT FACE="Palatino" SIZE=2><P>&nbsp;</P></FONT><P>&nbsp;</P><P> <IMG SRC="Image2.gif" WIDTH=140 HEIGHT=190></P><B><FONT FACE="Geneva" SIZE=1><P>Figure 9.2</B> This graphic representation of basic FM shows the modulating oscillator output (which would be in Hz) being added to the frequency input of the carrier.</P></FONT><FONT FACE="Palatino" SIZE=2><P>&nbsp;</P></FONT><P>&nbsp;</P><FONT SIZE=2><P><IMG SRC="Image3.gif" WIDTH=287 HEIGHT=97></P></FONT><B><FONT FACE="Geneva" SIZE=1><P>Figure 9.3</B> The carrier here is a simple sine wave of frequency <I>c</I>. FM sidebands are calculated as <I>c </I>± <I>nm</I>, with <I>n</I> = the counting numbers 1, 2, 3, etc...</P></FONT><FONT FACE="Palatino" SIZE=2><P>&nbsp;</P></FONT><P>&nbsp;</P><P>modulation deviation</P><B><P>&#150;&#150;&#150;&#150;&#150;&#150;&#150;&#151;&#150;</P></B><P>modulation frequency</P><B><FONT FACE="Geneva" SIZE=1><P>Figure 9.4</B> Formula for computation of FM &quot;modulation index&quot;.</P></FONT><B></B><FONT FACE="Palatino" SIZE=2><P>&nbsp;</P></FONT><B><P>&nbsp;</P></B><FONT SIZE=2><P><IMG SRC="Image4.gif" WIDTH=112 HEIGHT=206></P></FONT><B><FONT FACE="Geneva" SIZE=1><P>Figure 9.5</B> Block diagram of <I>instr 901</I>. This is a graphic representation of a basic FM instrument implemented in Csound. The ADSR envelopes control both the output amplitude of the instrument and the modulation index (and the deviation indirectly through the index).</P></FONT><FONT FACE="Palatino" SIZE=2><P>&nbsp;</P></FONT><P>&nbsp;</P><TABLE CELLSPACING=0 BORDER=0 CELLPADDING=5 WIDTH=473><TR><TD WIDTH="14%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>instr</FONT></TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>901</FONT></TD><TD WIDTH="61%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>; chowning fm</FONT></TD></TR><TR><TD WIDTH="14%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>inotedur</FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="74%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>p3</FONT></TD></TR><TR><TD WIDTH="14%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>imaxamp</FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="74%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>ampdb(p4)</FONT></TD></TR><TR><TD WIDTH="14%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>icarrfreq</FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="74%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>p5</FONT></TD></TR><TR><TD WIDTH="14%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>imodfreq</FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="74%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>p6</FONT></TD></TR><TR><TD WIDTH="14%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>ilowndx</FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="74%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>p7</FONT></TD></TR><TR><TD WIDTH="14%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>indxdiff</FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>=</FONT></TD><TD WIDTH="74%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>p8-p7</FONT></TD></TR><TR><TD WIDTH="14%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>aampenv</FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>linseg</FONT></TD><TD WIDTH="74%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>p9, p14*p3, p10, p15*p3, p11, p16*p3, p12, p17*p3, p13</FONT></TD></TR><TR><TD WIDTH="14%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>adevenv</FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>linseg</FONT></TD><TD WIDTH="74%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>p18, p23*p3, p19, p24*p3, p20, p25*p3, p21, p26*p3, p22</FONT></TD></TR><TR><TD WIDTH="14%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>amodosc</FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>oscili</FONT></TD><TD WIDTH="74%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>(ilowndx+indxdiff*adevenv)*imodfreq, imodfreq, 1</FONT></TD></TR><TR><TD WIDTH="14%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>acarosc</FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>oscili</FONT></TD><TD WIDTH="74%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>imaxamp*aampenv, icarrfreq+amodosc, 1</FONT></TD></TR><TR><TD WIDTH="14%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>out</FONT></TD><TD WIDTH="74%" VALIGN="TOP" COLSPAN=2><FONT FACE="Courier New" SIZE=2><P>acarosc</FONT></TD></TR><TR><TD WIDTH="14%" VALIGN="TOP">&nbsp;</TD><TD WIDTH="86%" VALIGN="TOP" COLSPAN=3><FONT FACE="Courier New" SIZE=2><P>endin</FONT></TD></TR></TABLE><B><FONT FACE="Geneva" SIZE=1><P>Figure 9.6</B> Orchestra code for <I>instr 901</I>, a Chowning FM instrument featuring dynamic spectra. Note that all envelope (<B>linseg</B>) times are a percentage of the note duration (<I>p3</I>).</P></FONT><FONT FACE="Times"><P>&nbsp;</P></FONT><P>&nbsp;</P><TABLE CELLSPACING=0 BORDER=0 CELLPADDING=5 WIDTH=473><TR><TD WIDTH="12%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>;</FONT></TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>opcode</FONT></TD><TD WIDTH="10%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>amp,</FONT></TD><TD WIDTH="7%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>freq</FONT></TD><TD WIDTH="6%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>c,</FONT></TD><TD WIDTH="6%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>m,</FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>index,</FONT></TD><TD WIDTH="35%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>waveshape</FONT></TD></TR><TR><TD WIDTH="12%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>aFMinst</FONT></TD><TD WIDTH="13%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>foscili</FONT></TD><TD WIDTH="10%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>20000,</FONT></TD><TD WIDTH="7%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>100,</FONT></TD><TD WIDTH="6%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>2,</FONT></TD><TD WIDTH="6%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>3,</FONT></TD><TD WIDTH="11%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>5,</FONT></TD><TD WIDTH="35%" VALIGN="TOP"><FONT FACE="Courier New" SIZE=2><P>1</FONT></TD></TR></TABLE><B><FONT FACE="Geneva" SIZE=1><P>Figure 9.7</B> The <B>foscili</B> opcode with arguments, a FM synthesizer in a single line of code.</P></FONT><FONT FACE="Times"><P>&nbsp;</P></FONT><P>&nbsp;</P><FONT SIZE=2><P><IMG SRC="Image5.gif" WIDTH=130 HEIGHT=83></P></FONT><B><FONT FACE="Geneva" SIZE=1><P>Figure 9.8</B> This ADSR envelope controls both the output amplitude and the modulation index of Chowning&#146;s brass-like FM instrument.</P></FONT><FONT FACE="Times"><P>&nbsp;</P></FONT><P>&nbsp;</P><FONT SIZE=2><P><IMG SRC="Image6.gif" WIDTH=357 HEIGHT=92></P></FONT><B><FONT FACE="Geneva" SIZE=1><P>Figure 9.9</B> a) Chowning uses an exponential envelope (the dotted curve seen here) to control the amplitude of the percussive instrument. We approximate this envelope with a linear ADSR envelope. b) This envelope controls the index of the percussive FM instrument. The index starts with the high value and quickly lowers.</P></FONT></BODY></HTML>