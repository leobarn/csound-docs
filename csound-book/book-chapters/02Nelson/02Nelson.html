<html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="Adobe GoLive 4">		<title>Wavetable Synth toot</title>	</head>	<body bgcolor="white">		<div align="left">			<h1><b>Understanding and Using Csound&#146;s GEN Routines</b></h1>			<h2><b>Jon Christopher Nelson</b></h2>		</div>		<p>Csound utilizes lookup tables for musical applications as diverse as wavetable synthesis, waveshaping, mapping MIDI note numbers and storing ordered pitch class sets. These function tables (f-tables) contain everything from periodic waveforms to arbitrary polynomials and randomly generated values. The specific data is created with Csound's f-table generator subroutines, or <a href="../../../2%20CD1/Reference/Manual4.0/gen/top.htm"><i>GEN</i></a> routines. Csound includes a family of GEN routines that write sampled soundfiles to a table, sum sinusoidal waves, draw lines and curves between specified points, create Chebyshev polynomials, calculate window functions, plot individual points in a table and generate random values. This tutorial surveys the Csound f-table generators, interspersing suggestions for efficient and powerful f-table utilization in Csound, including the introduction of a new technique for generating three-dimensional wave terrain synthesis f-tables.</p>		<p>A Csound f-table is an array of floating point values calculated by one of the GEN routines and stored in RAM for use while Csound generates sound. These f-tables are traditionally specified in the Csound score file and are generally restricted in size to lengths of a power of two (2n) or a power of two plus one (2n + 1). An<b> </b>f-table with a size of 1024 (210) will contain floating point values in a collection of sequential data storage locations with data addresses numbering from 0 to 1023. Tables can be visually displayed as mathematical graphs with data addresses plotted from left to right along the horizontal, or <i>x</i>-axis (abscissa values) and the actual stored data plotted along the vertical, or <i>y</i>-axis (ordinate values) as shown in figure 2.1.</p>		<p><img src="Image1.gif" width="594" height="392" hspace="9"></p>		<p>&nbsp;</p>		<p><b>Figure 2.1 </b>A close up of a 129 point function table focusing on the data in addresses 63 - 67.</p>		<p>An f-table outputs the data stored at the given address when it receives an input index value. In Csound, f-tables receive isolated indexes as well as streams of index values that scan tables once, periodically or randomly. Although f-tables are defined by score file <a href="../../../2%20CD1/Reference/Manual4.0/gen/top.htm">GEN</a> routines, a variety of orchestra file opcodes create index values and access table data. For example, the oscil opcode repeatedly generates index values from 0 to 1023 as it periodically scans a 1024-point f-table, an operation called wrap-around lookup. Orchestra file opcodes that include the suffix &quot;i&quot; have the added capability of linearly interpolating between successive table values. This feature effectively provides an audio smoothing function. For example, periodically scanning a 512-point f-table with a 43 Hz oscil opcode at a 44.1 kHz sampling rate reaps approximately two copies of each point in the f-table. In contrast, the oscili opcode interpolates between each of these values as shown in figure 2.2. Other interpolating opcodes include tablei, oscil1i, foscili and randi.</p>		<p><img src="Image2.gif" width="296" height="284">.</p>		<p><b>Figure 2.2</b> A comparison of a non-interpolating and an interpolating oscillator opcode.</p>		<p><b>The Extended Guard Point</b></p>		<p>Although Csound f-table sizes are defined as either 2n or 2n + 1, the space allocation for each f-table array is always 2n + 1, providing an <i>extended guard point</i> at the end of each table. If the requested table size is 2n, the extended guard point contains a duplicate of the first value of the f-table. If the requested size is 2n + 1, the guard point contains the final value of the requested function. The reason for explicitly defining an extended guard point is because Csound opcodes utilizing a 512-point table only send indexes from 0 to 511 (making the extended guard point seem superfluous), however, interpolating opcodes use the extended guard point value to calculate interpolation values after index 511. As a result, interpolating wrap-around lookup opcodes (<a href="../../../2%20CD1/Reference/Manual4.0/siggen/oscil.htm"><b>oscili</b></a><i>, </i><a href="../../../2%20CD1/Reference/Manual4.0/siggen/oscil.htm"><b>foscili</b></a><i> and</i> <b>phasor</b><i> -</i><a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm"><b>tablei</b></a><i> </i>pairs) should scan 2n size f-tables. This ensures smooth interpolation between the table end points since the extended guard point will be a copy of the first table value. In contrast, interpolating single scan opcodes (<a href="../../../2%20CD1/Reference/Manual4.0/siggen/oscil.htm"><b>oscili</b></a><i> </i>and <a href="../../../2%20CD1/Reference/Manual4.0/sigmod/linen.htm"><b>envlpx</b></a>) should scan f-tables with a 2n + 1 size. For example, the <a href="../../../2%20CD1/Reference/Manual4.0/sigmod/linen.htm"><b>envlpx</b></a> opcode scans a f-table to determine the rise shape of the attack portion of an envelope. If it scans a table with a 2n size, the extended guard point will contain the first table value. If this attack is slow, the <a href="../../../2%20CD1/Reference/Manual4.0/sigmod/linen.htm"><b>envlpx</b></a><i> </i>opcode will interpolate between the last table value and the starting table value, creating an amplitude discontinuity that could result in an audible click. However, using a table size of 2n + 1 ensures that the interpolation will create a smooth amplitude envelope transition between the attack and the pseudo-steady state.</p>		<p><b>Score F-Statements</b></p>		<p>The Csound <a href="../../../2%20CD1/Reference/Manual4.0/gen/top.htm">GEN</a> routines are specified by a function, or &quot;f-statement<i>s</i>&quot; in the score file. A Csound score may contain hundreds of f-statements, each with many parameters. A prototypical f-statement appears as follows:</p>		<p>		<table cellspacing="0" border="0" width="473">			<tr>				<td width="6%" valign="top"><b>f</b></td>				<td width="6%" valign="top">p1</td>				<td width="7%" valign="top">p2</td>				<td width="7%" valign="top">p3</td>				<td width="6%" valign="top">p4</td>				<td width="68%" valign="top">p5 . . .</td>			</tr>		</table>		</p>		<p>While parameter numbers 5 and higher specify different f-table attributes for different GEN routines, the first four parameters determine the following qualities for all GEN routines:</p>		<p>&#149;<i> p1 </i>= a unique f-table identification number</p>		<p>&#149;<i> p2 </i>= f-statement initialization time expressed in score beats</p>		<p>&#149;<i> p3 </i>= f-table size</p>		<p>&#149; <i>p4 </i>= GEN routine called to create the f-table</p>		<p>Orchestra file opcodes point to f-tables with arguments containing f-statement identification numbers, or <i>p1</i> values. A negative <i>p1</i> value in a score file f-statement deletes the f-table sharing the same positive <i>p1</i> value at a specified <i>p2</i> time. For example, the f-statement:</p>		<p>		<table cellspacing="0" border="0" width="473">			<tr>				<td width="5%" valign="top">f</td>				<td width="7%" valign="top">-8</td>				<td width="88%" valign="top">132</td>			</tr>		</table>		</p>		<p>will delete f-table 8 at beat 132 of the score. This provides a means of managing a computer's limited RAM while performing a score file containing numerous or large f-tables.</p>		<p>Furthermore, a <i>p1</i> value of 0 creates a null table that can be used to generate silence at the end of a soundfile. For example, a solitary:</p>		<p>		<table cellspacing="0" border="0" width="473">			<tr>				<td width="5%" valign="top">f</td>				<td width="7%" valign="top">0</td>				<td width="88%" valign="top">60</td>			</tr>		</table>		</p>		<p>in a score file creates a soundfile with sixty seconds of silence. This statement can also be used to turn on Csound, enabling the reception of MIDI data for one minute of real-time synthesis.</p>		<p>In addition to specifying the desired f-table GEN subroutine, <i>p4</i> values determine whether or not the function will be scaled. A positive <i>p4</i> value results in a table that is post-normalized to ordinate values between -1 and 1. Default f-table normalization facilitates more predictable control in applications such as wavetable or non-linear synthesis. A negative <i>p4</i> value inhibits rescaling and should be used for f-table applications requiring raw data, such as storing head-related transfer functions, algorithmic compositional data or MIDI mapping functions.</p>		<p><b>The GEN Routines</b></p>		<p><b>Reading Sampled Sounds into Function Tables with <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN01.htm">GEN1</a></b></p>		<p>Csound enables sound designers to manipulate and transform sampled sounds in a variety of ways. Soundfile filtering, amplitude modulation, waveshaping and panning are all possible using the <a href="../../../2%20CD1/Reference/Manual4.0/sigio/in.htm"><b>soundin</b></a> opcode in the orchestra file. However, manipulations such as transposing or frequency modulating soundfiles necessitates writing the soundfile into an f-table. The GEN1 f-statement stores soundfiles in tables and is written as follows:</p>		<p>		<table cellspacing="0" border="0" width="473">			<tr>				<td width="7%" valign="top">f</td>				<td width="7%" valign="top">#</td>				<td width="10%" valign="top">time</td>				<td width="10%" valign="top">size</td>				<td width="6%" valign="top">1</td>				<td width="14%" valign="top">filecode</td>				<td width="13%" valign="top">skiptime</td>				<td width="33%" valign="top">format</td>			</tr>		</table>		</p>		<p>The filecode value in <i>p5</i> can be an integer or a file name in quotation marks. A <i>p5</i> value of 33 reads the soundfile entitled soundin<b>.</b>33 from the <b>SFDIR</b> into the f-table while the <i>p5</i> entry &quot;great.snd&quot; loads the soundfile entitled great.snd into the f-table. Csound reads soundfiles from the beginning and reads the sample format from the soundfile header unless a skiptime and format are specified in <i>p6</i> and <i>p7</i>.</p>		<p><img src="Image3.gif" width="135" height="82" hspace="9"></p>		<p>&nbsp;</p>		<p><b>Figure 2.3</b> The f-table display for the soundfile &quot;great.snd&quot; as read into Csound via GEN1.</p>		<p>GEN1 is the only GEN routine that allows a table size of 0. In this case, the number of samples in the soundfile determines the table size. However, these tables can only be read by the <a href="../../../2%20CD1/Reference/Manual4.0/siggen/loscil.htm"><b>loscil</b></a> opcode. Although <a href="../../../2%20CD1/Reference/Manual4.0/siggen/loscil.htm"><b>loscil</b></a> provides sample playback with transposition and loops, it cannot start at a specified skip time into the table or read the table backwards. These manipulations are possible only if the soundfile is written into a GEN1 table with a 2n or 2n + 1 size. Using these table sizes will probably result in either soundfile truncation or extension with zero values. However, any opcode that calls an f-table will be able to read these soundfiles. In figure 2.4 we see a flowchart of a Csound instrument that reads a tabled soundfile using a <a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm"><b>line</b></a> opcode to provide table lookup values. The accompanying lines of orchestra and score code provide the Csound implementation of this instrument.</p>		<p><img src="Image4.gif" width="294" height="240"></p>		<p><b>Figure 2.4</b> Block diagram of <i>instr 201</i>, a soundfile reading instrument using a <a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm"><b>tablei</b></a> opcode</p>		<p>		<table cellspacing="0" border="0" width="477">			<tr>				<td valign="top" colspan="3">&nbsp;</td>				<td valign="top" colspan="2">instr</td>				<td valign="top" colspan="3"><a href="../../Book%20Instruments/02/201/201.html">201</a></td>				<td valign="top" colspan="4">; reading a soundfile using TAblei &amp; Gen1</td>			</tr>			<tr>				<td valign="top" colspan="3">iskip</td>				<td valign="top" colspan="2">=</td>				<td valign="top" colspan="5">int(p5*sr)</td>				<td valign="top" colspan="2">; starting sample in seconds</td>			</tr>			<tr>				<td valign="top" colspan="3">ilast</td>				<td valign="top" colspan="2">=</td>				<td valign="top" colspan="5">int(sr*p3*p6)+iskip</td>				<td valign="top" colspan="2">; ending sample in w/ transpose</td>			</tr>			<tr>				<td valign="top" colspan="3">kenv</td>				<td valign="top" colspan="2"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">linseg</a></td>				<td valign="top" colspan="7">0, .05, p4, p3-.05, p4, .02, 0</td>			</tr>			<tr>				<td valign="top" colspan="3">aread</td>				<td valign="top" colspan="2"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">line</a></td>				<td valign="top" colspan="5"></td>				<td valign="top" colspan="2">; a-rate table index</td>			</tr>			<tr>				<td valign="top" colspan="3">;aread</td>				<td valign="top" colspan="2"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">line</a></td>				<td valign="top" colspan="5">ilast, p3, iskip</td>				<td valign="top" colspan="2">; ilast to iskip: backwards!</td>			</tr>			<tr>				<td valign="top" colspan="3">asnd</td>				<td valign="top" colspan="2"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm">tablei</a></td>				<td valign="top" colspan="5">aread, 1</td>				<td valign="top" colspan="2">; scans ftable 1</td>			</tr>			<tr>				<td valign="top" colspan="3">asig</td>				<td valign="top" colspan="2">=</td>				<td valign="top" colspan="5">asnd*kenv</td>				<td valign="top" colspan="2">; imposes envelope</td>			</tr>			<tr>				<td valign="top" colspan="3">&nbsp;</td>				<td valign="top" colspan="2"><a href="../../../2%20CD1/Reference/Manual4.0/sigio/in.htm">out</a></td>				<td valign="top" colspan="7">asig</td>			</tr>			<tr>				<td valign="top" colspan="3">&nbsp;</td>				<td valign="top" colspan="9">endin</td>			</tr>			<tr>				<td valign="top" colspan="12">&nbsp;</td>			</tr>			<tr>				<td width="5%" valign="top">f</td>				<td width="6%" valign="top">1</td>				<td valign="top" colspan="2">0</td>				<td valign="top" colspan="2">262144</td>				<td width="5%" valign="top">1</td>				<td valign="top" colspan="2">&quot;speech1.aif&quot;</td>				<td valign="top" colspan="2">0 4 0</td>				<td width="40%" valign="top">; reads and normalizes</td>			</tr>		</table>		</p>		<p><b>Figure 2.5</b> Orchestra code for <i>instr 201</i>, a soundfile reading instrument with accompanying GEN1 call from score file.</p>		<p>In this example, the audio rate line segment <i>aread</i> is drawn from a starting sample <i>iskip</i> to an ending sample<i> ilast</i>. The starting sample is calculated by multiplying the sampling rate with the desired skip time<i> </i>(<i>p5</i>). Similarly, the final sample is determined by first multiplying the sampling rate, note duration (<i>p3</i>) and a transposition factor (<i>p6</i>) and then adding the result to <i>iskip</i>. The line segment<i> aread</i> provides the index into the raw soundfile data stored in f-table 30, which must have a 2n size. Multiplying <i>asnd</i> with <i>kenv</i>, whose peak amp is determined by an amplitude multiplier value (<i>p4</i>), imposes an amplitude envelope on this soundfile segment. You might try adding an oscillator to the <i>aread</i> value in this example to create an FM instrument.</p>		<p>Normalized soundfiles may be best for some sound playback and processing techniques while raw amplitude data is best for others. Using f-statement p4 values of +1 and -1 respectively generates normalized and raw tables containing the same soundfile. In the example code above, raw sample data is read into f-table 1 and then normalized to allow for amplitude scaling by the <a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm"><b>linseg</b></a> envelope.</p>		<p><b>Sinusoidal Wave Generators</b></p>		<p><img src="Image5.gif" width="283" height="170" hspace="9"></p>		<p>Csound also includes function generators that add sets of sinusoidal waves to create composite waveforms. In Csound, single 2&#185; periods of summed sinusoids are written into f-tables by the GEN10, GEN9, GEN19 and GEN11 subroutines. These GEN routines facilitate the creation of sine, cosine, square, sawtooth, triangle and pulse waveforms, which have direct applications as waveshapes for wavetable synthesis. Periodically cycling through these tables with wrap-around lookup opcodes generates a periodic waveform.</p>		<p>&nbsp;</p>		<p><b>Figure 2.6</b> F-table display for simple geometric waveshapes - sine, saw, square and pulse generated using Csound&#146;s <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm">GEN10</a> subroutine.</p>		<p><a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm"><b>GEN10</b></a></p>		<p><a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm">GEN10</a>, <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm">GEN9</a> and <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm">GEN19</a> all create composite waveforms by summing sine waves with specified relative strengths. Of these, <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm">GEN10</a> adds harmonic partials that are all in phase. The relative strengths of ascending harmonic partials (1, 2, 3, etc.) are defined in parameter numbers, <i>p5</i>, <i>p6</i> and <i>p7</i> respectively. Figure 2.7 shows a flowchart for two equivalent oscillators, followed by their accompanying orchestra file and score file code containing a few simple GEN10 wave recipes.</p>		<p><img src="Image6.gif" width="502" height="270"></p>		<p><b>Figure 2.7</b> Block diagram of <i>instr 202</i> and <i>203</i>, table-lookup oscillator instruments realized via the <a href="../../../2%20CD1/Reference/Manual4.0/siggen/phasor.htm"><b>phasor</b></a><b> </b>and <a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm"><b>tablei</b></a><b> </b>opcodes and an interpolating table-lookup oscillator.</p>		<p>		<table cellspacing="0" border="0" width="473">			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td width="11%" valign="top">instr</td>				<td width="16%" valign="top"><a href="../../Book%20Instruments/02/202/202.html">202</a></td>				<td valign="top" colspan="2">; table-lookup oscillator - phasor/tablei</td>			</tr>			<tr>				<td width="13%" valign="top">kenv</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">linseg</a></td>				<td valign="top" colspan="2">0, .05, p4, p3-.1,</td>				<td width="48%" valign="top">p4*.8, .05, 0</td>			</tr>			<tr>				<td width="13%" valign="top">aphase</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/phasor.htm">phasor</a></td>				<td valign="top" colspan="2">p5</td>				<td width="48%" valign="top">; phases 0-1 p5 times-per-second</td>			</tr>			<tr>				<td width="13%" valign="top">ilength</td>				<td width="11%" valign="top">=</td>				<td valign="top" colspan="2">ftlen(p6)</td>				<td width="48%" valign="top">; determine length of f-table</td>			</tr>			<tr>				<td width="13%" valign="top">aphase</td>				<td width="11%" valign="top">=</td>				<td valign="top" colspan="2">aphase*ilength</td>				<td width="48%" valign="top">; step through entire table</td>			</tr>			<tr>				<td width="13%" valign="top">asig</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm">tablei</a></td>				<td valign="top" colspan="2">aphase, p6</td>				<td width="48%" valign="top">; read table number from p6</td>			</tr>			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/sigio/in.htm">out</a></td>				<td valign="top" colspan="2">asig*kenv</td>				<td width="48%" valign="top">; impose envelope</td>			</tr>			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td valign="top" colspan="4">endin</td>			</tr>			<tr>				<td valign="top" colspan="5">&nbsp;</td>			</tr>			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td width="11%" valign="top">instr</td>				<td width="16%" valign="top">203</td>				<td valign="top" colspan="2">; table-lookup oscillator - Oscili</td>			</tr>			<tr>				<td width="13%" valign="top">kenv</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">linseg</a></td>				<td valign="top" colspan="3">0, .05, p4, p3-.1, p4*.8, .05, 0</td>			</tr>			<tr>				<td width="13%" valign="top">asig</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/oscil.htm">oscili</a></td>				<td valign="top" colspan="3">kenv, p5, p6</td>			</tr>			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/sigio/in.htm">out</a></td>				<td valign="top" colspan="3">asig</td>			</tr>			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td valign="top" colspan="4">endin</td>			</tr>		</table>		</p>		<p><b>Figure 2.8</b> Orchestra code for <i>instr 202</i> and <i>instr 203,</i> table-lookup oscillator instruments using a <a href="../../../2%20CD1/Reference/Manual4.0/siggen/phasor.htm"><b>phasor</b></a>/<a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm"><b>tablei</b></a> pair versus an <b>oscili</b>.</p>		<p>		<table cellspacing="0" border="0" width="477">			<tr>				<td valign="top" colspan="7">; 8192 point sine</td>			</tr>			<tr>				<td width="8%" valign="top">f 2</td>				<td width="4%" valign="top">0</td>				<td valign="top" colspan="2">8192</td>				<td width="5%" valign="top">10</td>				<td valign="top" colspan="2">1</td>			</tr>			<tr>				<td valign="top" colspan="7">; sawtooth wave &#150; all harmonics (through 13th) at a strength of 1/harmonic#</td>			</tr>			<tr>				<td width="8%" valign="top">f 3</td>				<td width="4%" valign="top">0</td>				<td width="8%" valign="top">513</td>				<td valign="top" colspan="3">10</td>				<td width="75%" valign="top">1 .5 .333 .25 .2 .166 .143 .125 .111 .1 .0909 .0833 .077</td>			</tr>			<tr>				<td valign="top" colspan="7">; square wave &#150; odd harmonics (through 17th) at a strength of 1/harmonic#</td>			</tr>			<tr>				<td width="8%" valign="top">f 4</td>				<td width="4%" valign="top">0</td>				<td valign="top" colspan="2">513</td>				<td valign="top" colspan="2">10</td>				<td width="75%" valign="top">1 0 .333 0 .2 0 .143 0 .111 0 .0909 0 .077 0 .0666 0 .0588</td>			</tr>			<tr>				<td valign="top" colspan="7">; pulse (trumpet?)</td>			</tr>			<tr>				<td width="8%" valign="top">f 5</td>				<td width="4%" valign="top">0</td>				<td width="8%" valign="top">513</td>				<td valign="top" colspan="3">10</td>				<td width="75%" valign="top">.8 .9 .95 .96 1 .91 .8 .75 .6 .42 .5 .4 .33 .28 .2 .15</td>			</tr>		</table>		</p>		<p><b>Figure 2.9</b> F-Table code for simple geometric waveforms as illustrated in figure 2.6.</p>		<p><a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm"><b>GEN9</b></a></p>		<p>Like <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm">GEN10</a>, <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm">GEN9</a> creates composite waveforms by adding partials with specified relative strengths. However, <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm">GEN9</a> can create enharmonic partials with unique phase dispositions.</p>		<p><img src="Image7.gif" width="220" height="42" hspace="9"></p>		<p><b>Figure 2.10</b> F-table displays for three waveforms generated using <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm">GEN9</a> &#151; a cosine, a triangle and a half-sine.</p>		<p>The partial number, strength and phase are defined in groups of three parameters beginning with <i>p5</i>. Here are a few more wave recipes that can be generated with GEN9:</p>		<p>		<table cellspacing="0" border="0" width="472">			<tr>				<td valign="top" colspan="8">; cosine wave (sine wave with initial phase of 90 degrees):</td>			</tr>			<tr>				<td width="7%" valign="top">f 6</td>				<td valign="top" colspan="2">0</td>				<td width="9%" valign="top">8192</td>				<td valign="top" colspan="2">9</td>				<td valign="top" colspan="2">1 1 90</td>			</tr>			<tr>				<td valign="top" colspan="8">; triangle wave (odd harmonics at a strength of 1/harmonic</td>			</tr>			<tr>				<td valign="top" colspan="8">; number with inverted phase for every other harmonic):</td>			</tr>			<tr>				<td width="7%" valign="top">f 7</td>				<td width="4%" valign="top">0</td>				<td valign="top" colspan="2">513</td>				<td width="3%" valign="top">9</td>				<td valign="top" colspan="3">1 1 0 3 .333 180 5 .2 0 7 .143 180 9 .111 0</td>			</tr>			<tr>				<td valign="top" colspan="8">; half of a sine:</td>			</tr>			<tr>				<td width="7%" valign="top">f 8</td>				<td valign="top" colspan="2">0</td>				<td width="9%" valign="top">513</td>				<td valign="top" colspan="3">9</td>				<td width="78%" valign="top">.5 1 0</td>			</tr>		</table>		</p>		<p><b>Figure 2.11</b> F-table code for cosine, triangle and half sine as illustrated in figure 2.10.</p>		<p>Unlike orchestra opcodes that specify phase as a fraction of a cycle (0-1), score f-statements express phase in degrees (0-360). In addition, the partial number does not have to be an integer. Consequently, specifying partial number .5 in <i>f 8</i> above generates half of a sine wave, which could be used as an envelope, frequency multiplier, or a table for waveshaping.</p>		<p><a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm"><b>GEN19</b></a></p>		<p><a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm">GEN19</a> extends <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm">GEN9</a> by adding a DC offset parameter. Beginning with <i>p5</i> in the f-statement, the partial number, relative strength, initial phase and DC offset are specified in groups of four parameters. Figure 2.12 shows an f-table display and score code to generate a quasi-Guassian curve that rises from 0 to 1.</p>		<p><img src="Image8.gif" width="136" height="81" hspace="9"></p>		<p>&nbsp;</p>		<p>		<table cellspacing="0" border="0" width="468">			<tr>				<td width="7%" valign="top">f 9</td>				<td width="4%" valign="top">0</td>				<td width="9%" valign="top">1024</td>				<td width="9%" valign="top">-19</td>				<td width="72%" valign="top">1 .5 270 .5</td>			</tr>		</table>		</p>		<p><b>Figure 2.12</b> Score code and f-table display for a quasi-Gaussian curve generated using <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm">GEN19</a>.</p>		<p>The DC offset will add .5 to the ordinate values of this sine wave. As a result, these unscaled <i>(-p4)</i> values will span from 0 to 1 rather than from -.5 to .5. This provides a good grain envelope for granular synthesis instruments, or this function could serve as an amplitude multiplier that controls both left-right and front-back panning in a four channel soundfile. Or these same values could provide table indexes into f-tables containing head-related transfer function data for controlling dynamic filters and reverb times for virtual reality applications.</p>		<p><b>Enharmonic Partials</b></p>		<p>Although <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm">GEN9</a> and <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm">GEN19</a> can create enharmonic (non-integer) partials, only partials that are either integers or .5 multiples should be used for wrap-around lookup operations. Other enharmonic partials typically generate non-zero values at the end of the f-table, creating discontinuities and resultant noise. Reducing the detuned partial&#146;s relative strength can diminish discontinuities. Moreover, paired partials with complementary offsets and equal strengths will eradicate discontinuities. For example, partials <i>x</i>.75 and <i>y</i>.25, where <i>x</i> and <i>y</i> are positive integers will exhibit equivalent positive and negative ordinate values at the end of the f-table. Summing these values results in a final table ordinate value of 0 so no discontinuity exists during wrap-around lookup. Similarly, partials <i>x</i>.66 and <i>y</i>.33, <i>x</i>.2 and <i>y</i>.8 and <i>x</i>.79 and <i>y</i>.21 will also &quot;zero out&quot; at the end of the f-table. Pairs of equal strength partials with shared offsets and inverse phase relationships also avoid final table discontinuities. For example, partials <i>x</i>.9 and <i>y</i>.9, where <i>x</i> and <i>y</i> are unequal positive integers, with shared strengths and respective initial phases of 0 and 180 will add up to 0 at the end of the table. The f-tables in figure 2.14 exhibit sums of 0 at their end points, demonstrate cycle offset and phase inversion cancellation.</p>		<p><img src="Image9.gif" width="210" height="40" hspace="9"></p>		<p><b>Figure 2.13</b> F-table display for enharmonic spectra without discontinuities.</p>		<p>		<table cellspacing="0" border="0" width="473">			<tr>				<td width="8%" valign="top">f 10</td>				<td width="4%" valign="top">0</td>				<td width="9%" valign="top">8192</td>				<td width="4%" valign="top">9</td>				<td width="8%" valign="top">.75</td>				<td width="3%" valign="top">1</td>				<td width="4%" valign="top">0</td>				<td width="8%" valign="top">2.25</td>				<td width="4%" valign="top">1</td>				<td width="7%" valign="top">0</td>				<td width="42%" valign="top">; cycle offset cancellation</td>			</tr>			<tr>				<td width="8%" valign="top">f 11</td>				<td width="4%" valign="top">0</td>				<td width="9%" valign="top">8192</td>				<td width="4%" valign="top">9</td>				<td width="8%" valign="top">1.66</td>				<td width="3%" valign="top">1</td>				<td width="4%" valign="top">0</td>				<td width="8%" valign="top">3.33</td>				<td width="4%" valign="top">1</td>				<td width="7%" valign="top">0</td>				<td width="42%" valign="top">; cycle offset cancellation</td>			</tr>			<tr>				<td width="8%" valign="top">f 12</td>				<td width="4%" valign="top">0</td>				<td width="9%" valign="top">8192</td>				<td width="4%" valign="top">9</td>				<td width="8%" valign="top">1.25</td>				<td width="3%" valign="top">1</td>				<td width="4%" valign="top">0</td>				<td width="8%" valign="top">4.25</td>				<td width="4%" valign="top">1</td>				<td width="7%" valign="top">180</td>				<td width="42%" valign="top">; inverse phase cancellation</td>			</tr>		</table>		</p>		<p><b>Figure 2.14</b> F-table code for enharmonic partial functions without discontinuities.</p>		<p>Although these enharmonic partial pairing strategies eliminate discontinuities, they will not result in periodic phasing of detuned partials. Periodic phasing is only achieved by generating a table containing summed high harmonic partials with complex relationships. This results in a f-table with inherent phasing relationships.</p>		<p>While utilizing this type of enharmonic function, a desired fundamental frequency is generated by dividing the desired oscillator rate by the lowest harmonic number present in the function. For example, an f-table containing harmonic partial numbers 21, 22, 25, 27, 31, 33, 34 and 35 should be read with the <a href="../../../2%20CD1/Reference/Manual4.0/siggen/oscil.htm"><b>oscili</b></a> opcode's <i>cps</i> argument set to the desired frequency divided by 21, the lowest partial present. Since this will often result in a low oscillator frequency that scans the table slowly, it is best to use a large table with an interpolating <a href="../../../2%20CD1/Reference/Manual4.0/siggen/oscil.htm"><b>oscili</b></a> opcode.</p>		<p><img src="Image10.gif" width="302" height="236"></p>		<p><b>Figure 2.15</b> Block diagram of <i>instr 204</i>, a simple oscillator instrument with &quot;desired&quot; pitch computed as <i>cpspch(p5)/21 (i.e. the lowest partial).</i></p>		<p>		<table cellspacing="0" border="0" width="484">			<tr>				<td valign="top" colspan="3">&nbsp;</td>				<td valign="top" colspan="2">instr</td>				<td valign="top" colspan="2"><a href="../../Book%20Instruments/02/204/204.html">204</a></td>				<td width="61%" valign="top">; simple w/ cpspch pitch converter</td>			</tr>			<tr>				<td valign="top" colspan="3">ifrq</td>				<td valign="top" colspan="2">=</td>				<td valign="top" colspan="3">cpspch(p5)</td>			</tr>			<tr>				<td valign="top" colspan="3">kenv</td>				<td valign="top" colspan="2">linseg</td>				<td valign="top" colspan="3">0, .05, p4, p3-.1, p4*.8, .05, 0</td>			</tr>			<tr>				<td valign="top" colspan="3">asig</td>				<td valign="top" colspan="2">oscili</td>				<td valign="top" colspan="3">kenv, ifrq/21, 13</td>			</tr>			<tr>				<td valign="top" colspan="3">&nbsp;</td>				<td valign="top" colspan="2">out</td>				<td valign="top" colspan="3">asig</td>			</tr>			<tr>				<td valign="top" colspan="3">&nbsp;</td>				<td valign="top" colspan="5">endin</td>			</tr>			<tr>				<td valign="top" colspan="8">&nbsp;</td>			</tr>			<tr>				<td width="8%" valign="top">f 13</td>				<td width="4%" valign="top">0</td>				<td valign="top" colspan="2">8192</td>				<td valign="top" colspan="2">9</td>				<td valign="top" colspan="2">21 1 0 22 1 0 25 1 0 27 1 0 31 1 0 33 1 0 34 1 0 35 1 0</td>			</tr>		</table>		</p>		<p><b>Figure 2.16</b> Orchestra and f-table code for oscillator instrument with high order partials illustrated in figure 2.17.</p>		<p><img src="Image11.gif" width="136" height="82" hspace="9"></p>		<p><b>Figure 2.17</b> F-table display for high-order enharmonic partials as defined by <i>f 13</i> in figure 2.16.</p>		<p>The phasing relationship in this f-table is still non-dynamic. Dynamic phasing is only achieved through mixing multiple oscillators with enharmonic relationships in an orchestra instrument.</p>		<p><a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN11.htm"><b>GEN11</b></a></p>		<p>Unlike <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm">GEN10</a>, <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm">GEN9</a> and <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN09.htm">GEN19</a>, <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN11.htm">GEN11</a> adds cosine partials instead of sines. As shown in figure 2.18, this <a href="../../../2%20CD1/Reference/Manual4.0/gen/top.htm">GEN</a> routine is designed to generate pulse trains with the number of harmonics, the lowest harmonic and an amplitude coefficient specified in <i>p5</i>, <i>p6</i> and <i>p7</i> of the f-statement.</p>		<p><img src="Image12.gif" width="144" height="91" hspace="9"></p>		<p>&nbsp;</p>		<p>		<table cellspacing="0" border="0" width="468">			<tr>				<td width="8%" valign="top">f 14</td>				<td width="3%" valign="top">0</td>				<td width="10%" valign="top">4096</td>				<td width="7%" valign="top">11</td>				<td width="72%" valign="top">10 1 .9</td>			</tr>		</table>		</p>		<p><b>Figure 2.18</b> F-table display and score code for pulse-train generated using GEN11.</p>		<p>Although <i>f 14</i> above creates a pulse train by summing sines, GEN11 generates pulse-trains with fewer parameters. It also calculates the relative amplitudes according to an exponential strength coefficient. However, GEN11 pulse trains are non-dynamic. For dynamic pulse-trains use the <a href="../../../2%20CD1/Reference/Manual4.0/siggen/buzz.htm"><b>buzz</b></a> and <a href="../../../2%20CD1/Reference/Manual4.0/siggen/buzz.htm"><b>gbuzz</b></a> opcodes.</p>		<p><b>Drawing Segments</b></p>		<p><a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN05.htm"><b>GEN7</b></a></p>		<p>Csound also includes four GEN routines that draw lines and curves between specified points. For each of these, the odd-numbered parameters (<i>p5</i>, <i>p7</i> and <i>p9</i> ) and even-numbered parameters (<i>p6</i>, <i>p8</i>, <i>p10</i>), contain ordinate and segment length values respectively. Figure 2.18 illustrates a few waveforms that use <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN05.htm">GEN7</a> to draw line segments.</p>		<p><img src="Image13.gif" width="288" height="183" hspace="9"></p>		<p><b>Figure 2.19</b> F-table display for linear waveforms drawn with GEN7.</p>		<p>		<table cellspacing="0" border="0" width="477">			<tr>				<td width="9%" valign="top">f 15</td>				<td width="4%" valign="top">0</td>				<td width="8%" valign="top">512</td>				<td width="4%" valign="top">7</td>				<td width="31%" valign="top">1 512 -1</td>				<td width="45%" valign="top">; sawtooth</td>			</tr>			<tr>				<td width="9%" valign="top">f 16</td>				<td width="4%" valign="top">0</td>				<td width="8%" valign="top">1024</td>				<td width="4%" valign="top">7</td>				<td width="31%" valign="top">1 512 1 0 -1 512 -1</td>				<td width="45%" valign="top">; square</td>			</tr>			<tr>				<td width="9%" valign="top">f 17</td>				<td width="4%" valign="top">0</td>				<td width="8%" valign="top">512</td>				<td width="4%" valign="top">7</td>				<td width="31%" valign="top">-1 100 -1 312 1 100 1</td>				<td width="45%" valign="top">; for waveshaping</td>			</tr>			<tr>				<td width="9%" valign="top">f 18</td>				<td width="4%" valign="top">0</td>				<td width="8%" valign="top">128</td>				<td width="4%" valign="top">7</td>				<td width="31%" valign="top">1 1 1 0 0</td>				<td width="45%" valign="top">; a single impulse</td>			</tr>		</table>		</p>		<p><b>Figure 2.20</b> F-table code for simple waveshape drawn with GEN7 and shown in figure 2.19.</p>		<p>Segment lengths are expressed as table points and values of 0 result in discontinuities. Furthermore, segment lengths generally should add up to the table length. Segment length sums greater than or less than the table length truncate the function or pad the table with zeros respectively.</p>		<p><a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN05.htm"><b>GEN5</b></a></p>		<p>The <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN05.htm">GEN5</a> parameters are identical to those of <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN05.htm">GEN7</a>. However, since GEN5 draws exponential segments, only non-zero ordinate values are allowed. Figure 2.21 shows the a typical example of GEN5 used to draw and exponential envelope function.</p>		<p><img src="Image14.gif" width="138" height="83" hspace="9"></p>		<p>&nbsp;</p>		<p>		<table cellspacing="0" border="0" width="468">			<tr>				<td width="10%" valign="top">f 19</td>				<td width="5%" valign="top">0</td>				<td width="9%" valign="top">1024</td>				<td width="6%" valign="top">5</td>				<td width="71%" valign="top">.001 100 1 824 .75 100 .001</td>			</tr>		</table>		</p>		<p><b>Figure 2.21</b> F-table display and score code of an exponential envelope function drawn with GEN5.</p>		<p><a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN08.htm"><b>GEN8</b></a></p>		<p>Although <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN08.htm">GEN8</a> creates very smooth cubic spline curves, using two equal ordinates separated by a short segment length results in large humps. Figure 2.22 shows a couple of typical GEN8 f-tables.</p>		<p><img src="Image15.gif" width="284" height="84" hspace="9"></p>		<p>&nbsp;</p>		<p>		<table cellspacing="0" border="0" width="468">			<tr>				<td valign="top" colspan="7">; quasi-guassian</td>			</tr>			<tr>				<td width="4%" valign="top">f</td>				<td width="6%" valign="top">20</td>				<td valign="top" colspan="2">0</td>				<td width="8%" valign="top">513</td>				<td width="6%" valign="top">8</td>				<td width="72%" valign="top">0 150 0.5 50 1 113 1 50 0.5 150 0</td>			</tr>			<tr>				<td valign="top" colspan="7">; stretched cosine</td>			</tr>			<tr>				<td width="4%" valign="top">f</td>				<td valign="top" colspan="2">21</td>				<td width="5%" valign="top">0</td>				<td width="8%" valign="top">2048</td>				<td width="6%" valign="top">8</td>				<td width="72%" valign="top">1 750 0 550 -1 400 0 348 1</td>			</tr>		</table>		</p>		<p><b>Figure 2.22</b> F-table display and score code for two spline curves drawn with GEN8, a quasi-Gaussian and a stretched cosine.</p>		<p>With a table length of 513, the quasi-Guassian curve in <i>f 20</i> works well for single scan operations.</p>		<p><a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN06.htm"><b>GEN6</b></a></p>		<p>Unlike the other segment drawing <a href="../../../2%20CD1/Reference/Manual4.0/gen/top.htm">GEN</a> routines, GEN6 requires groupings of three ordinate values separated by intermediary length values to calculate a cubic polynomial function segment. Here, the third ordinate value becomes the first in the next grouping of three. These cubic polynomial segments are relatively smooth if the odd numbered ordinates oscillate between maximum and minimum values while the even ordinates, the points of inflection, maintain somewhat linear relationships between the odd ordinates. Successive maxima or minima odd ordinate values or points of inflection without linear relationships result in segment spikes.</p>		<p><img src="Image16.gif" width="440" height="82" hspace="9"></p>		<p>&nbsp;</p>		<p>		<table cellspacing="0" border="0" width="468">			<tr>				<td valign="top" colspan="6">; smooth</td>			</tr>			<tr>				<td width="6%" valign="top">f</td>				<td width="6%" valign="top">22</td>				<td width="4%" valign="top">0</td>				<td width="8%" valign="top">8193</td>				<td width="6%" valign="top">6</td>				<td width="71%" valign="top">0 2048 .5 2048 1 2048 0 2049 -1</td>			</tr>			<tr>				<td valign="top" colspan="6">; points of inflection are not between odd ordinate values</td>			</tr>			<tr>				<td width="6%" valign="top">f</td>				<td width="6%" valign="top">23</td>				<td width="4%" valign="top">0</td>				<td width="8%" valign="top">8193</td>				<td width="6%" valign="top">6</td>				<td width="71%" valign="top">0 2048 1 2048 -1 2048 1 2049 0</td>			</tr>			<tr>				<td valign="top" colspan="6">; successive maxima</td>			</tr>			<tr>				<td width="6%" valign="top">f</td>				<td width="6%" valign="top">24</td>				<td width="4%" valign="top">0</td>				<td width="8%" valign="top">1024</td>				<td width="6%" valign="top">6</td>				<td width="71%" valign="top">0 256 .25 256 .5 256 .75 256 1</td>			</tr>		</table>		</p>		<p><b>Figure 2.23</b> F-table display and score code for 3 cubic polynomial functions.</p>		<p><b>Waveshaping Function Tables</b></p>		<p><a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN03.htm">GEN3</a>, <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN13.htm">GEN13</a>, <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN13.htm">GEN14</a> and <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN15.htm">GEN15</a> all create polynomial functions that can be used effectively in waveshaping instruments. Of these, <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN03.htm">GEN3</a> is the most flexible since it creates a polynomial function over any left (<i>p5</i>) and right<i> </i>(<i>p6</i>) ordinate values with any number of specified coefficients in <i>p7</i> and higher. Figure 2.24 shows a typical example.</p>		<p><img src="Image17.gif" width="139" height="87" hspace="9"></p>		<p>&nbsp;</p>		<p>		<table cellspacing="0" border="0" width="473">			<tr>				<td width="10%" valign="top"><font face="Courier New" size="2">f 25</font></td>				<td width="6%" valign="top"><font face="Courier New" size="2">0</font></td>				<td width="9%" valign="top"><font face="Courier New" size="2">1025</font></td>				<td width="5%" valign="top"><font face="Courier New" size="2">3</font></td>				<td width="71%" valign="top"><font face="Courier New" size="2">-1 1 5 2 4 1 3 1 2 1</font></td>			</tr>		</table>		</p>		<p><b>Figure 2.24</b> F-table display and score code for a polynomial function drawn with GEN3<i>.</i></p>		<p><a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN13.htm">GEN13</a>, <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN13.htm">GEN14</a> and <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN15.htm">GEN15</a>, on the other hand, create specific types of functions known as Chebyshev polynomials. Chebyshev polynomials can split a sinusoid into harmonic partials in a waveshaping instrument. GEN13 and GEN14 f-statements specify the relative strengths of harmonic partials to generate Chebyshev polynomials of the first and second kind respectively. Specifying the phase of each harmonic with GEN15 generates two f-tables that can be used in a phase quadrature instrument.</p>		<p>The tables generated with this family of GEN routines have bipolar structures with origins located at the midpoint of the table. Consequently, it is best to use a table length of 2n + 1. Waveshaping typically uses a sine wave to provide lookup indexes to one of these tables. If the waveshaping f-table-length equals the waveform resolution (16 bit = 216 = 65536), linear mapping results. A flowchart for a waveshaping instrument can be seen below. The essential lines of Csound code for this instrument with a simple waveshaping f-table accompany this figure.</p>		<p><img src="Image18.gif" width="362" height="288"></p>		<p><b>Figure 2.25</b> Block diagram of <i>instr 205</i>, a simple waveshaping instrument with normalization.</p>		<p>		<table cellspacing="0" border="0" width="478">			<tr>				<td valign="top" colspan="2">&nbsp;</td>				<td valign="top" colspan="2">instr</td>				<td valign="top" colspan="3"><a href="../../Book%20Instruments/02/205/205.html">205</a></td>				<td valign="top" colspan="2">; a simple waveshaping</td>			</tr>			<tr>				<td valign="top" colspan="2">ksweep</td>				<td valign="top" colspan="2">linseg</td>				<td valign="top" colspan="4">0, p3*.5, .49, p3*.5, 0</td>				<td width="42%" valign="top">; index sweep function</td>			</tr>			<tr>				<td valign="top" colspan="2">aindex</td>				<td valign="top" colspan="2"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/oscil.htm">oscili</a></td>				<td valign="top" colspan="4">ksweep, p5, 2</td>				<td width="42%" valign="top">; sound to waveshape</td>			</tr>			<tr>				<td valign="top" colspan="2">atable</td>				<td valign="top" colspan="2"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm">tablei</a></td>				<td valign="top" colspan="4">aindex, 26, 1, .5</td>				<td width="42%" valign="top">; waveshape aindex</td>			</tr>			<tr>				<td valign="top" colspan="2">knorm</td>				<td valign="top" colspan="2"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm">tablei</a></td>				<td valign="top" colspan="4">ksweep*2, 27, 1</td>				<td width="42%" valign="top">; make normalization function</td>			</tr>			<tr>				<td valign="top" colspan="2">kenv</td>				<td valign="top" colspan="2"><a href="../../../2%20CD1/Reference/Manual4.0/sigmod/linen.htm">linen</a></td>				<td valign="top" colspan="4">p4, .01, p3, .02</td>				<td width="42%" valign="top">; amplitude envelope</td>			</tr>			<tr>				<td valign="top" colspan="2">&nbsp;</td>				<td valign="top" colspan="2"><a href="../../../2%20CD1/Reference/Manual4.0/sigio/in.htm">out</a></td>				<td valign="top" colspan="4">(atable*knorm)*kenv</td>				<td width="42%" valign="top">; normalize and impose envelope</td>			</tr>			<tr>				<td valign="top" colspan="2">&nbsp;</td>				<td valign="top" colspan="7">endin</td>			</tr>			<tr>				<td valign="top" colspan="9">&nbsp;</td>			</tr>			<tr>				<td width="11%" valign="top">f 26</td>				<td valign="top" colspan="2">0</td>				<td valign="top" colspan="2">1025</td>				<td width="3%" valign="top">7</td>				<td valign="top" colspan="2">-1 256 -1 513 1 256 1</td>				<td width="42%" valign="top">; waveshaping function</td>			</tr>			<tr>				<td width="11%" valign="top">f 27</td>				<td valign="top" colspan="2">0</td>				<td valign="top" colspan="2">513</td>				<td width="3%" valign="top">4</td>				<td valign="top" colspan="2">26 1</td>				<td width="42%" valign="top">; amp normalizing function</td>			</tr>		</table>		</p>		<p><b>Figure 2.26</b> Orchestra and f-table code for simple waveshaping instrument, <i>instr 205.</i></p>		<p><img src="Image19.gif" width="289" height="86" hspace="9"></p>		<p>&nbsp;</p>		<p><b>Figure 2.27</b> F-table displays of waveshaping function drawn with GEN7 and normalizing function drawn with GEN4 as defined in figure 2.26.</p>		<p>In this example, a 440 Hz sine oscillator provides the index to the table with a ramping envelope that reaches a peak amplitude of .49. These sinusoidal amplitude values (<i>y</i>-axis of <i>f 2</i>) provide the lookup indexes (<i>x</i>-axis) into f-table number 26. The <i>atable</i> <a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm"><b>tablei</b></a> opcode sets the table mode at 1, normalizing the table length to <i>x</i>-axis, or abscissa values between 0 and 1. Since the table has a bipolar structure, this <b>tablei</b> opcode also has a table offset of .5. This offset value is added to the <i>aindex</i> values, resulting in table indexes that oscillate around the midpoint of the waveshaping function. When the <i>ksweep</i> values that in turn dictate the<i> aindex</i> amplitude reach .49, the index values oscillate between .01 and .99, scanning the entire waveshaping function.</p>		<p>Since <i>f 26</i> contains a line segment from -1 to +1 over the middle section of the table, the sinusoidal index values generate a sinusoidal wave when the <i>ksweep</i> values are below .25. As <i>ksweep</i> exceeds .25 throughout the middle section of each note, all <i>aindex </i>values less than -.25 and greater than .25 will reap f-table values of -1 and 1 respectively. This non-linear waveshaping simulates amplifier distortion in which loud input signals are clipped, introducing numerous high partials into the sound. Another possible amplifier distortion model might use GEN9 to create a waveshaping function containing half of a sine wave with an initial phase disposition of 270 degrees.</p>		<p><b>Waveshaping Amplitude Normalization with <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN04.htm">GEN4</a></b></p>		<p>Clearly, adjusting the range of periodic index values to a waveshaping f-table provides a powerful means of dynamic signal modification, but it also directly alters the amplitude of the sound. For instances in which this causal relationship is undesirable, the waveshaped f-table output must be normalized to exhibit a consistent peak value before imposing an amplitude envelope. The GEN4 subroutine provides the means to accomplish this task by analyzing a waveshaping function and creating a complementary amplitude normalization f-table. Multiplying the outputs of a waveshaping f-table and its complementary GEN4 normalizing f-table generates a waveshaped signal with a consistent peak amplitude value if the sweep function determines the index for both tables. An amplitude envelope can then be imposed on the resultant signal. This technique can be used to create paradoxical sounds in which the non-linear distortion has no relationship to the amplitude. For example, inversely related sweep and amplitude envelopes can generate a sound that distorts more as the amplitude diminishes.</p>		<p>In <i>instr 205 </i>illustrated above, <i>f</i> <i>27</i> uses GEN4 to analyze <i>f 26</i> and create a normalizing function. The GEN4 f-statement specifies the f-table number to analyze in <i>p5</i> and defines the table mode in <i>p6</i>. Any non-zero value in <i>p6</i> will perform the analysis, assuming the waveshaping function has a bipolar structure. This bipolar analysis data must be written into a table that is half the size of the waveshaping f-table. A <i>p6</i> value of zero analyzes a function that scans from left to right. In this case, both the waveshaping and normalizing tables must be the same size.</p>		<p><a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN13.htm"><b>GEN13</b></a><b> and <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN13.htm">GEN14</a></b></p>		<p>Although any GEN routine can create waveshaping functions, Chebyshev polynomials provide more predictable waveshaping results by splitting waves into harmonic partials with specified relative strengths. As the periodic index values increase, the resultant Chebyshev polynomial f-table output generally adds the specified partials in ascending order. GEN14 creates a slightly gentler curve than GEN13 but the resultant waveshaped signals sound very similar. Specifying strengths of more than 20 harmonics in either GEN13 or GEN14 reaps great distortion as the index values approach the table length limits. For both GEN13 and GEN14, the Chebyshev polynomial is drawn over ordinate values that span from -<i>p5</i> to +<i>p5</i> f-statement values while <i>p6</i> defines an amplitude scaling factor that is applied to any index into the table. Utilizing a <a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm"><b>table</b></a> opcode offset argument of .5 and an f-statement <i>p6</i> value of .5 provides a simple means of scaling a normalized periodic index. The relative strengths of harmonic partials are defined in <i>p7</i> and following. Figure 2.28 defines some typical spectra using GEN13 and GEN14.</p>		<p>		<table cellspacing="0" border="0" width="487">			<tr>				<td valign="top" colspan="3">&nbsp;</td>				<td valign="top" colspan="2">instr</td>				<td valign="top" colspan="3"><a href="../../Book%20Instruments/02/206/206.html">206</a></td>				<td valign="top" colspan="2">; waveshaping with normalization</td>			</tr>			<tr>				<td valign="top" colspan="3">iwshpfun</td>				<td valign="top" colspan="2">=</td>				<td valign="top" colspan="5">p6</td>			</tr>			<tr>				<td valign="top" colspan="3">inormfun</td>				<td valign="top" colspan="2">=</td>				<td valign="top" colspan="5">p7</td>			</tr>			<tr>				<td valign="top" colspan="3">ksweep</td>				<td valign="top" colspan="2"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">linseg</a></td>				<td valign="top" colspan="4">0, p3*.5, .49, p3*.5, 0</td>				<td width="42%" valign="top">; index sweep function</td>			</tr>			<tr>				<td valign="top" colspan="3">aindex</td>				<td valign="top" colspan="2"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/oscil.htm">oscili</a></td>				<td valign="top" colspan="4">ksweep, p5, 2</td>				<td width="42%" valign="top">; sound to waveshape</td>			</tr>			<tr>				<td valign="top" colspan="3">atable</td>				<td valign="top" colspan="2"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm">tablei</a></td>				<td valign="top" colspan="4">aindex, iwshpfun, 1, .5</td>				<td width="42%" valign="top">; waveshape aindex</td>			</tr>			<tr>				<td valign="top" colspan="3">knorm</td>				<td valign="top" colspan="2"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm">tablei</a></td>				<td valign="top" colspan="4">ksweep*2, inormfun, 1</td>				<td width="42%" valign="top">; make normalization function</td>			</tr>			<tr>				<td valign="top" colspan="3">kenv</td>				<td valign="top" colspan="2"><a href="../../../2%20CD1/Reference/Manual4.0/sigmod/linen.htm">linen</a></td>				<td valign="top" colspan="4">p4, .01, p3, .02</td>				<td width="42%" valign="top">; amplitude envelope</td>			</tr>			<tr>				<td valign="top" colspan="3">asig</td>				<td valign="top" colspan="2">=</td>				<td valign="top" colspan="4">(atable*knorm)*kenv</td>				<td width="42%" valign="top">; normalize and impose env</td>			</tr>			<tr>				<td valign="top" colspan="3">&nbsp;</td>				<td valign="top" colspan="2"><a href="../../../2%20CD1/Reference/Manual4.0/sigio/in.htm">out</a></td>				<td valign="top" colspan="5">asig</td>			</tr>			<tr>				<td valign="top" colspan="3">&nbsp;</td>				<td valign="top" colspan="2">dispfft</td>				<td valign="top" colspan="5">asig, .1, 1024</td>			</tr>			<tr>				<td valign="top" colspan="3">&nbsp;</td>				<td valign="top" colspan="7">endin</td>			</tr>			<tr>				<td valign="top" colspan="10">&nbsp;</td>			</tr>			<tr>				<td valign="top" colspan="10">; 8192 point sine</td>			</tr>			<tr>				<td width="5%" valign="top">f</td>				<td width="7%" valign="top">2</td>				<td valign="top" colspan="2">0</td>				<td valign="top" colspan="2">8192</td>				<td width="6%" valign="top">10</td>				<td valign="top" colspan="3">1</td>			</tr>			<tr>				<td valign="top" colspan="10">; waveshaping function: GEN13 - odd harmonics</td>			</tr>			<tr>				<td width="5%" valign="top">f</td>				<td width="7%" valign="top">28</td>				<td valign="top" colspan="2">0</td>				<td valign="top" colspan="2">4097</td>				<td width="6%" valign="top">13</td>				<td valign="top" colspan="3">1 1 1 0 .8 0 .5 0 .2</td>			</tr>			<tr>				<td valign="top" colspan="10">; amp normalizing function</td>			</tr>			<tr>				<td width="5%" valign="top">f</td>				<td width="7%" valign="top">280</td>				<td valign="top" colspan="2">0</td>				<td valign="top" colspan="2">2049</td>				<td width="6%" valign="top">4</td>				<td valign="top" colspan="3">28 1</td>			</tr>			<tr>				<td valign="top" colspan="10">; waveshaping function: GEN14 - same harmonics</td>			</tr>			<tr>				<td width="5%" valign="top">f</td>				<td width="7%" valign="top">29</td>				<td valign="top" colspan="2">0</td>				<td valign="top" colspan="2">4097</td>				<td width="6%" valign="top">14</td>				<td valign="top" colspan="3">1 1 1 0 .8 0 .5 0 .2</td>			</tr>			<tr>				<td valign="top" colspan="10">; amp normalizing function</td>			</tr>			<tr>				<td width="5%" valign="top">f</td>				<td width="7%" valign="top">290</td>				<td valign="top" colspan="2">0</td>				<td valign="top" colspan="2">2049</td>				<td width="6%" valign="top">4</td>				<td valign="top" colspan="3">29 1</td>			</tr>			<tr>				<td valign="top" colspan="10">; waveshaping function: GEN14 - even harmonics</td>			</tr>			<tr>				<td width="5%" valign="top">f</td>				<td width="7%" valign="top">30</td>				<td valign="top" colspan="2">0</td>				<td valign="top" colspan="2">4097</td>				<td width="6%" valign="top">14</td>				<td valign="top" colspan="3">1 1 0 1 0 .6 0 .4 0 .1</td>			</tr>			<tr>				<td valign="top" colspan="10">; amp normalizing function</td>			</tr>			<tr>				<td width="5%" valign="top">f</td>				<td width="7%" valign="top">300</td>				<td valign="top" colspan="2">0</td>				<td valign="top" colspan="2">2049</td>				<td width="6%" valign="top">4</td>				<td valign="top" colspan="3">30 1</td>			</tr>			<tr>				<td valign="top" colspan="10">; waveshaping function: GEN 13 - over 20 harmonics</td>			</tr>			<tr>				<td width="5%" valign="top">f</td>				<td width="7%" valign="top">31</td>				<td valign="top" colspan="2">0</td>				<td valign="top" colspan="2">4097</td>				<td width="6%" valign="top">13</td>				<td valign="top" colspan="3">1 1 1 .666 .5 .3 0 0 .3 0 .2 .25 .33 0 0 .1 0 .45 .33 .2 .1 .1 .15</td>			</tr>			<tr>				<td valign="top" colspan="10">; amp normalizing function</td>			</tr>			<tr>				<td width="5%" valign="top">f</td>				<td width="7%" valign="top">310</td>				<td valign="top" colspan="2">0</td>				<td valign="top" colspan="2">2049</td>				<td width="6%" valign="top">4</td>				<td valign="top" colspan="3">31 1</td>			</tr>		</table>		</p>		<p><b>Figure 2.28</b> Orchestra and f-table code for <i>instr 206, </i>a simple waveshaping instrument with normalization which uses Chebyshev polynomials of first (GEN13) and second (GEN14) kind to allow the specification of specific and definable harmonic partials and amplitudes under waveshaping.</p>		<p><img src="Image20.gif" width="142" height="102" align="LEFT" hspace="9"></p>		<p><b>Figure 2.29</b> Four f-table displays of waveshaping functions for odd harmonics (<i>f 28</i>), same harmonics (<i>f 29</i>), even harmonics (<i>f 30</i>) and over 20 harmonics (<i>f 31</i>) using GEN13 and GEN14 as defined by the f-table code in figure 2.28.</p>		<p>Tabling sine waves with amplitudes that move slowly over the entire range of the waveshaping table provides an effective means of exploring the properties of waveshaping functions. After exploring these properties, the amplitude sweeps can be adjusted to highlight the optimum desired dynamic timbres. Wrap-around tables other than sines and GEN1 tables containing sampled sounds can also be waveshaped with interesting results.</p>		<p><b>Waveshaping Amplitude Normalization with Signification</b></p>		<p>The basic waveshaping instruments defined in figures 2.26 and 2.28 achieve amplitude normalization through the use of GEN4 f-tables. Inverting the phase of consecutive pairs of harmonics can also minimize unpredictable amplitude fluctuations, a procedure called signification. In GEN13 and GEN14, harmonic phases are shifted by 180 degrees if a negative harmonic strength is used as in figure 2.30.</p>		<p><img src="Image21.gif" width="141" height="87" hspace="9"></p>		<p>&nbsp;</p>		<p>		<table cellspacing="0" border="0" width="473">			<tr>				<td valign="top" colspan="5">; signification</td>			</tr>			<tr>				<td width="8%" valign="top">f 32</td>				<td width="4%" valign="top">0</td>				<td width="8%" valign="top">8193</td>				<td width="6%" valign="top">13</td>				<td width="75%" valign="top">1 1 1 1 -1 -1 1 1 -1 -1 1 1 -1 -1 1 1 -1 -1</td>			</tr>		</table>		</p>		<p><b>Figure 2.30</b> F-table display and code of a waveshaping function generated with GEN13 in which consecutive pairs of harmonics are inverted in phase.</p>		<p>Consequently, the f-table will reap a more consistent amplitude output if the harmonic strengths follow the pattern: +, +, -, -, +, +, -, -, etc. Additional amplitude normalization models for waveshaping can be found in Roads (Roads 1996) and Le Brun (Le Brun 1979).</p>		<p><b>Phase-Quadrature with <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN15.htm">GEN15</a></b></p>		<p>A GEN15 f-statement creates two f-tables with identification numbers <i>p1</i> and <i>p1 </i>+ 1<i>.</i> Harmonic partials with phases between 0 and 179 are written into the first table while those with phases between 180 and 359 are written into the second. Using these tables, a <i>phase-quadrature</i> instrument generates sounds containing individual harmonics with arbitrarily specified phases. Figure 2.31 shows a flowchart for an amplitude normalized version of Le Brun's phase-quadrature instrument (Le Brun 1979), which is followed by the accompanying Csound code.</p>		<p><img src="Image22.gif" width="496" height="483"></p>		<p><b>Figure 2.31</b> Block diagram of <i>instr 207</i>, a phase-quadrature waveshaping instrument.</p>		<p>		<table cellspacing="0" border="0" width="473">			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td width="11%" valign="top">instr</td>				<td width="15%" valign="top"><a href="../../Book%20Instruments/02/207/207.html">207</a></td>				<td valign="top" colspan="2">; a phase-quadratic waveshaping</td>			</tr>			<tr>				<td width="13%" valign="top">idur</td>				<td width="11%" valign="top">=</td>				<td valign="top" colspan="3">p3</td>			</tr>			<tr>				<td width="13%" valign="top">iamp</td>				<td width="11%" valign="top">=</td>				<td valign="top" colspan="3">p4</td>			</tr>			<tr>				<td width="13%" valign="top">ifrq</td>				<td width="11%" valign="top">=</td>				<td valign="top" colspan="3">cpspch(p5)</td>			</tr>			<tr>				<td width="13%" valign="top">iswp1</td>				<td width="11%" valign="top">=</td>				<td valign="top" colspan="3">p6</td>			</tr>			<tr>				<td width="13%" valign="top">iswp2</td>				<td width="11%" valign="top">=</td>				<td valign="top" colspan="3">p7</td>			</tr>			<tr>				<td width="13%" valign="top">kswp</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">line</a></td>				<td valign="top" colspan="2">iswp1, idur, iswp2</td>				<td width="49%" valign="top">; amplitude sweep values</td>			</tr>			<tr>				<td width="13%" valign="top">acosi</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/oscil.htm">oscili</a></td>				<td valign="top" colspan="2">kswp*.5, ifrq, 2</td>				<td width="49%" valign="top">; f 2=cosine wave</td>			</tr>			<tr>				<td width="13%" valign="top">asine</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/oscil.htm">oscili</a></td>				<td valign="top" colspan="2">kswp, ifrq, 1</td>				<td width="49%" valign="top">; f 1=sine wave</td>			</tr>			<tr>				<td width="13%" valign="top">atab1</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm">tablei</a></td>				<td valign="top" colspan="2">acosi, 33, 1, .5</td>				<td width="49%" valign="top">; tables acosi to GEN13</td>			</tr>			<tr>				<td width="13%" valign="top">atab2</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm">tablei</a></td>				<td valign="top" colspan="2">acosi, 34, 1, .5</td>				<td width="49%" valign="top">; tables acosi to GEN14</td>			</tr>			<tr>				<td width="13%" valign="top">knrm1</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm">tablei</a></td>				<td valign="top" colspan="2">kswp, 35, 1</td>				<td width="49%" valign="top">; normalizing f 35</td>			</tr>			<tr>				<td width="13%" valign="top">knrm2</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm">tablei</a></td>				<td valign="top" colspan="2">kswp, 36, 1</td>				<td width="49%" valign="top">; normalizing f 36</td>			</tr>			<tr>				<td width="13%" valign="top">anrm1</td>				<td width="11%" valign="top">=</td>				<td valign="top" colspan="2">atab1*knrm1</td>				<td width="49%" valign="top">; normalize GEN13 signal</td>			</tr>			<tr>				<td width="13%" valign="top">anrm2</td>				<td width="11%" valign="top">=</td>				<td valign="top" colspan="2">atab2*knrm2*asine</td>				<td width="49%" valign="top">; normalize GEN14 signal</td>			</tr>			<tr>				<td width="13%" valign="top">amix</td>				<td width="11%" valign="top">=</td>				<td valign="top" colspan="2">anrm1+anrm2</td>				<td width="49%" valign="top">; mix GEN13 and GEN14</td>			</tr>			<tr>				<td width="13%" valign="top">kenv</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">expseg</a></td>				<td valign="top" colspan="3">.001, idur*.1, iamp, idur*.1, iamp*.8, idur*.8, .001</td>			</tr>			<tr>				<td width="13%" valign="top">asig</td>				<td width="11%" valign="top">=</td>				<td valign="top" colspan="3">amix*kenv</td>			</tr>			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/sigio/in.htm">out</a></td>				<td valign="top" colspan="3">asig</td>			</tr>			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td valign="top" colspan="4">endin</td>			</tr>		</table>		</p>		<p><b>Figure 2.32</b> Orchestra code for <i>instr 207</i>, a phase-quadrature waveshaping instrument with amplitude normalization.</p>		<p>		<table cellspacing="0" border="0" width="473">			<tr>				<td valign="top" colspan="8">; f 33 below generates function tables 33 and 34 as illustrated in fig 2.34</td>			</tr>			<tr>				<td width="9%" valign="top">f 33</td>				<td width="4%" valign="top">0</td>				<td valign="top" colspan="2">8193</td>				<td valign="top" colspan="2">15</td>				<td valign="top" colspan="2">1 1 1 0 1 180 .8 45 .6 270 .5 90 .4 225 .2 135 .1 315</td>			</tr>			<tr>				<td valign="top" colspan="8">&nbsp;</td>			</tr>			<tr>				<td width="9%" valign="top">f 35</td>				<td width="4%" valign="top">0</td>				<td valign="top" colspan="2">4097</td>				<td valign="top" colspan="2">4</td>				<td width="15%" valign="top">33 1</td>				<td width="58%" valign="top">; amp normalization fn for f 33</td>			</tr>			<tr>				<td width="9%" valign="top">f 36</td>				<td width="4%" valign="top">0</td>				<td valign="top" colspan="2">4097</td>				<td valign="top" colspan="2">4</td>				<td width="15%" valign="top">34 1</td>				<td width="58%" valign="top">; amp normalization fn for f 34</td>			</tr>			<tr>				<td valign="top" colspan="8">; Additional table 33/34 pairs for study (generated by defining only f 33)</td>			</tr>			<tr>				<td valign="top" colspan="8">; Even harmonics with no phase shift, odd harmonics with phase shift</td>			</tr>			<tr>				<td width="9%" valign="top">f 33</td>				<td valign="top" colspan="2">0</td>				<td valign="top" colspan="2">8193</td>				<td width="7%" valign="top">15</td>				<td valign="top" colspan="2">1 1 1 0 1 0 1 180 1 180 1 0 1 0 1 180 1 180 1 0 1 0 1 180 1 180</td>			</tr>			<tr>				<td valign="top" colspan="8">; Different harmonic strengths and phases</td>			</tr>			<tr>				<td width="9%" valign="top">f 33</td>				<td valign="top" colspan="2">0</td>				<td valign="top" colspan="2">8193</td>				<td width="7%" valign="top">15</td>				<td valign="top" colspan="2">1 1 1 0 1 0 .9 180 .5 270 .75 90 .4 45 .2 225 .1 0</td>			</tr>			<tr>				<td valign="top" colspan="8">; Lower harmonics no phase shift, upper harmonics with phase shift</td>			</tr>			<tr>				<td width="9%" valign="top">f 33</td>				<td valign="top" colspan="2">0</td>				<td valign="top" colspan="2">8193</td>				<td width="7%" valign="top">15</td>				<td valign="top" colspan="2">1 1 1 0 1 0 .5 0 .9 0 .3 0 .75 0 .2 180 .6 180 .15 180 .5 180 .1 180</td>			</tr>			<tr>				<td valign="top" colspan="8">; Lower harmonics with phase shift, upper harmonics no phase shift</td>			</tr>			<tr>				<td width="9%" valign="top">f 33</td>				<td valign="top" colspan="2">0</td>				<td valign="top" colspan="2">8193</td>				<td width="7%" valign="top">15</td>				<td valign="top" colspan="2">1 1 1 180 1 180 .5 180 .9 180 .3 180 .75 180 .2 0 .6 0 .15 0 .5 0 .1 0</td>			</tr>		</table>		</p>		<p><b>Figure 2.33</b> F-table code using GEN15 for phase-quadrature and GEN4 for normalizing functions.</p>		<p><img src="Image23.gif" width="281" height="200" hspace="9"></p>		<p><b>Figure 2.34</b> F-table displays for GEN15 phase-quadrature pair (f-tables f 33 and f 34) and their amplitude normalizing function defines with GEN4 (f-tables f 35 and f 36)</p>		<p>This phase quadrature instrument performs waveshaping on sinusoidal waves. As with single table waveshaping instruments, this phase quadrature instrument creates more complex sounds with complex waves or sampled sounds providing the table indexes.</p>		<p><b>Using <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN12.htm">GEN12</a> for Asynchronous Frequency Modulation</b></p>		<p>Csound&#146;s<b> </b>GEN12 subroutine generates the log of a modified Bessel function. And this function provides an amplitude scaling factor for the asynchronous FM instrument described by Palamin and Palamin (Palamin and Palamin 1988).</p>		<p><img src="Image24.gif" width="140" height="85"></p>		<p>		<table cellspacing="0" border="0" width="468">			<tr>				<td width="9%" valign="top">f 37</td>				<td width="5%" valign="top">0</td>				<td width="9%" valign="top">1024</td>				<td width="6%" valign="top">-12</td>				<td width="6%" valign="top">40</td>				<td width="65%" valign="top">; Bessel function-defined from 0 to 40</td>			</tr>		</table>		</p>		<p><b>Figure 2.35</b> F-table display and code of a modified Bessel function produced with GEN12.</p>		<p>This instrument is an amplitude-modulated FM instrument in which the AM and FM modulating frequencies are synchronized. The lookup into this table is dependent upon the modulation index &quot;I&quot; and a partial strength parameter &quot;r&quot; in Palamin and Palamin's formula I(r-1/r). Parameter <i>r </i>values greater than 1 emphasize higher frequencies while values less than 1 emphasize lower frequencies. Parameter <i>r</i> values of 1 will not modify the usual FM spectrum. Figure 2.36 is a flowchart for this extremely interesting and versatile extension of FM synthesis (Palamin and Palamin 1988) followed by the orchestra code for the Csound implementation in figure 2.37.</p>		<p><img src="Image25.gif" width="478" height="481"></p>		<p><b>Figure 2.36</b> Block diagram of <i>instr 208, </i>an amplitude -modulated FM instrument.</p>		<p>		<table cellspacing="0" border="0" width="464">			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td width="12%" valign="top">instr</td>				<td width="16%" valign="top"><a href="../../Book%20Instruments/02/208/208.html">208</a></td>				<td valign="top" colspan="2">; Am/fm</td>			</tr>			<tr>				<td width="13%" valign="top">idur</td>				<td width="12%" valign="top">=</td>				<td valign="top" colspan="3">p3</td>			</tr>			<tr>				<td width="13%" valign="top">iamp</td>				<td width="12%" valign="top">=</td>				<td valign="top" colspan="3">p4</td>			</tr>			<tr>				<td width="13%" valign="top">icarfrq</td>				<td width="12%" valign="top">=</td>				<td valign="top" colspan="3">p5</td>			</tr>			<tr>				<td width="13%" valign="top">imodfrq</td>				<td width="12%" valign="top">=</td>				<td valign="top" colspan="3">p6</td>			</tr>			<tr>				<td width="13%" valign="top">aenv</td>				<td width="12%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">expseg</a></td>				<td valign="top" colspan="3">.001, idur*.1, iamp, idur*.8, iamp*.75, idur*.1, .001</td>			</tr>			<tr>				<td width="13%" valign="top">i1</td>				<td width="12%" valign="top">=</td>				<td valign="top" colspan="2">p7*imodfrq</td>				<td width="41%" valign="top">; p7=mod. index start</td>			</tr>			<tr>				<td width="13%" valign="top">i2</td>				<td width="12%" valign="top">=</td>				<td valign="top" colspan="2">p8*imodfrq</td>				<td width="41%" valign="top">; p8=mod. index end</td>			</tr>			<tr>				<td width="13%" valign="top">adev</td>				<td width="12%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">line</a></td>				<td valign="top" colspan="2">i1, idur, i2</td>				<td width="41%" valign="top">; modulation frequency</td>			</tr>			<tr>				<td width="13%" valign="top">aindex</td>				<td width="12%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">line</a></td>				<td valign="top" colspan="2">p7, idur, p8</td>				<td width="41%" valign="top">; modulation index</td>			</tr>			<tr>				<td valign="top" colspan="5">; r value envelope: p9-p10 = exp. partial strength parameter start and end</td>			</tr>			<tr>				<td width="13%" valign="top">ar</td>				<td width="12%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">linseg</a></td>				<td valign="top" colspan="3">1, .1, p9, p3-.2, p10, .1, 1</td>			</tr>			<tr>				<td width="13%" valign="top">amp1</td>				<td width="12%" valign="top">=</td>				<td valign="top" colspan="3">(aindex*(ar+(1/ar)))/2</td>			</tr>			<tr>				<td width="13%" valign="top">afmod</td>				<td width="12%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/oscil.htm">oscili</a></td>				<td valign="top" colspan="2">amp1, imodfrq, 1</td>				<td width="41%" valign="top">; FM modulator (sine)</td>			</tr>			<tr>				<td width="13%" valign="top">atab</td>				<td width="12%" valign="top">=</td>				<td valign="top" colspan="2">(aindex*(ar-1/ar))/2</td>				<td width="41%" valign="top">; index to table</td>			</tr>			<tr>				<td width="13%" valign="top">alook</td>				<td width="12%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm">tablei</a></td>				<td valign="top" colspan="2">atab, 37</td>				<td width="41%" valign="top">; table lookup to GEN12</td>			</tr>			<tr>				<td width="13%" valign="top">aamod</td>				<td width="12%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/oscil.htm">oscili</a></td>				<td valign="top" colspan="2">atab, adev, 2</td>				<td width="41%" valign="top">; AM modulator (cosine)</td>			</tr>			<tr>				<td width="13%" valign="top">aamod</td>				<td width="12%" valign="top">=</td>				<td valign="top" colspan="3">(exp(alook+aamod))*aenv</td>			</tr>			<tr>				<td width="13%" valign="top">acar</td>				<td width="12%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/oscil.htm">oscili</a></td>				<td valign="top" colspan="2">aamod, afmod+icarfrq, 1</td>				<td width="41%" valign="top">; AFM (carrier)</td>			</tr>			<tr>				<td width="13%" valign="top">asig</td>				<td width="12%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/sigmod/rms.htm">balance</a></td>				<td valign="top" colspan="3">acar, aenv</td>			</tr>			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td width="12%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/sigio/in.htm">out</a></td>				<td valign="top" colspan="3">asig</td>			</tr>			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td valign="top" colspan="4">endin</td>			</tr>		</table>		</p>		<p><b>Figure 2.37</b> Orchestra code for <i>instr 208, </i>an amplitude-modulated FM instrument as shown in figure 2.37.</p>		<p><a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN02.htm"><b>GEN2</b></a><b> and <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN17.htm">GEN17</a></b></p>		<p>GEN2 takes parameter values in the f-statement and transfers them directly into a table. For most applications, normalization is undesirable and a value of -2 will be used in <i>p4</i> of the f-statement. Although older versions of Csound allowed only 150 parameters in any given f-statement, newer versions either have limits of at least 1024 parameters or they dynamically allocate memory to accommodate parameter number limits dictated solely by the available RAM.</p>		<p>The GEN2 subroutine lends itself well to many algorithmic applications. For example, GEN2 tables containing same-sized &quot;weighted&quot; pitch-class sets and collections of note durations can be randomly indexed by a k-rate <a href="../../../2%20CD1/Reference/Manual4.0/siggen/rand.htm"><b>randh</b></a> opcode with an amplitude argument equal to the table length. These random indexes can generate weighted random rhythmic and pitch class values in a melody generator. GEN2 tables containing ordered data such as a twelve-tone row can be scanned linearly to provide algorithmic compositional parameters. The GEN17 subroutine also writes parameter values directly into a table. However, GEN17 holds these values for a number of table points, creating a step function. GEN17 tables are most useful for mapping MIDI note numbers onto register numbers or onto sampled sound f-table numbers. Here are sample GEN2 and GEN17 tables:</p>		<p><img src="Image26.gif" width="267" height="84" hspace="9"></p>		<p>&nbsp;</p>		<p>		<table cellspacing="0" border="0" width="473">			<tr>				<td width="8%" valign="top">f 38</td>				<td width="4%" valign="top">0</td>				<td width="7%" valign="top">16</td>				<td width="7%" valign="top">-2</td>				<td width="75%" valign="top">2 1 9 10 5 3 4 0 8 7 6 11</td>			</tr>			<tr>				<td width="8%" valign="top">f 39</td>				<td width="4%" valign="top">0</td>				<td width="7%" valign="top">128</td>				<td width="7%" valign="top">-17</td>				<td width="75%" valign="top">0 1 12 2 24 3 36 4 48 5 60 6 72 7 84 8 96 9 108 10 120 11</td>			</tr>		</table>		</p>		<p><b>Figure 2.38</b> F-table display and score code for non-normalized versions of GEN2 and GEN17, a pitch map and a MIDI keyboard map.</p>		<p>The flowchart in figure 2.39 and the accompanying orchestra code in figure 2.40 provide an example of an instrument that cycles through a twelve-tone row using the row defined in <i>f 38</i>.</p>		<p><img src="Image27.gif" width="412" height="506"></p>		<p><b>Figure 2.39</b> Block diagram of <i>instr 209</i>, a 12-tone row instrument.</p>		<p>		<table cellspacing="0" border="0" width="473">			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td width="11%" valign="top"><font size="1">instr</font></td>				<td width="15%" valign="top"><a href="../../Book%20Instruments/02/209/209.html"><font size="1">209</font></a></td>				<td valign="top" colspan="2"><font size="1">; a 12 tone row</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font size="1">idur</font></td>				<td width="11%" valign="top"><font size="1">=</font></td>				<td valign="top" colspan="3"><font size="1">p3</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font size="1">iamp</font></td>				<td width="11%" valign="top"><font size="1">=</font></td>				<td valign="top" colspan="3"><font size="1">p4</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font size="1">irow</font></td>				<td width="11%" valign="top"><font size="1">=</font></td>				<td valign="top" colspan="2"><font size="1">12/idur</font></td>				<td width="51%" valign="top"><font size="1">; 12 notes per note duration</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font size="1">irowrep</font></td>				<td width="11%" valign="top"><font size="1">=</font></td>				<td valign="top" colspan="2"><font size="1">p5*irow</font></td>				<td width="51%" valign="top"><font size="1">; number of times to repeat the row</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font size="1">iseed</font></td>				<td width="11%" valign="top"><font size="1">=</font></td>				<td valign="top" colspan="2"><font size="1">p6</font></td>				<td width="51%" valign="top"><font size="1">; seed 0-1,same seed = same random seq</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font size="1">kenv</font></td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/oscil.htm"><font size="1">oscil</font></a></td>				<td valign="top" colspan="2"><font size="1">iamp, irowrep, 10</font></td>				<td width="51%" valign="top"><font size="1">; f 10 = envelope function</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font size="1">kcnt1</font></td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/phasor.htm"><font size="1">phasor</font></a></td>				<td valign="top" colspan="2"><font size="1">1/idur</font></td>				<td width="51%" valign="top"><font size="1">; counts 0-1 over note duration</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font size="1">kcnt2</font></td>				<td width="11%" valign="top"><font size="1">=</font></td>				<td valign="top" colspan="2"><font size="1">kcnt1*12</font></td>				<td width="51%" valign="top"><font size="1">; counts 0-12 over note duration</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font size="1">kpc</font></td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm"><font size="1">table</font></a></td>				<td valign="top" colspan="2"><font size="1">kcnt2, 38</font></td>				<td width="51%" valign="top"><font size="1">; f 38 = ROW</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font size="1">krn</font></td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/rand.htm"><font size="1">randh</font></a></td>				<td valign="top" colspan="2"><font size="1">6, irowrep, iseed</font></td>				<td width="51%" valign="top"><font size="1">; determines random value</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font size="1">koct</font></td>				<td width="11%" valign="top"><font size="1">=</font></td>				<td valign="top" colspan="2"><font size="1">(abs(int(krn)))+5</font></td>				<td width="51%" valign="top"><font size="1">; converts to random octave</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font size="1">kpch</font></td>				<td width="11%" valign="top"><font size="1">=</font></td>				<td valign="top" colspan="2"><font size="1">koct+(kpc*.01)</font></td>				<td width="51%" valign="top"><font size="1">; formats pc + random oct to pch</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font size="1">kcps</font></td>				<td width="11%" valign="top"><font size="1">=</font></td>				<td valign="top" colspan="2"><font size="1">cpspch(kpch)</font></td>				<td width="51%" valign="top"><font size="1">; converts pch to cps</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font size="1">asig</font></td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/oscil.htm"><font size="1">oscil</font></a></td>				<td valign="top" colspan="2"><font size="1">kenv, kcps, 4</font></td>				<td width="51%" valign="top"><font size="1">; f 4 = square wave</font></td>			</tr>			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/sigio/in.htm"><font size="1">out</font></a></td>				<td valign="top" colspan="3"><font size="1">asig</font></td>			</tr>			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td valign="top" colspan="4"><font size="1">endin</font></td>			</tr>		</table>		</p>		<p><b>Figure 2.40</b> Orchestra code for <i>instr 209</i>, an instrument that cycles thought table <i>f 38</i>, a twelve-tone row defined using GEN2.</p>		<p><b>Window Functions with <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN20.htm">GEN20</a></b></p>		<p>The <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN20.htm">GEN20</a> and <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN21.htm">GEN21</a> subroutines generate window functions and f-tables with different random distributions respectively. The window functions created by the GEN20 subroutine can be used as spectrum analysis windows, granular synthesis amplitude envelopes, or a variety of other applications. The window functions, which are specified with f-statement <i>p5</i> values of 1&#151; 9 include Hamming, Hanning, Bartlett, Blackman, Blackman-Harris, Gaussian, Kaiser, Rectangle and Sinc. For each of these, the number in <i>p6</i> of the f-statement defines the peak window value. Of these, the Kaiser window requires an additional <i>p7</i> value between 0 and 1, adjusting the function to approximate a rectangle or a Hamming window. Figure 2.41 shows the f-table display and figure 2.42 defines the corresponding score code for f-statements of each window type.</p>		<p><img src="Image28.gif" width="434" height="300" hspace="9"></p>		<p><b>Figure 2.41</b> F-table displays for standard window functions: Hamming (<i>f 40</i>), Hanning (<i>f 41</i>), Bartlett (<i>f 42</i>), Blackman (<i>f 43</i>), Blackman-Harris (<i>f 44</i>), Guassian (<i>f 45</i>), Kaiser (<i>f 46</i>), Rectangle (<i>f 47</i>) and Sinc (<i>f 48</i>).</p>		<p>		<table cellspacing="0" border="0" width="468">			<tr>				<td width="8%" valign="top">f 40</td>				<td width="4%" valign="top">0</td>				<td width="7%" valign="top">513</td>				<td width="6%" valign="top">20</td>				<td width="13%" valign="top">1 1</td>				<td width="62%" valign="top">; Hamming</td>			</tr>			<tr>				<td width="8%" valign="top">f 41</td>				<td width="4%" valign="top">0</td>				<td width="7%" valign="top">513</td>				<td width="6%" valign="top">20</td>				<td width="13%" valign="top">2 1</td>				<td width="62%" valign="top">; Hanning</td>			</tr>			<tr>				<td width="8%" valign="top">f 42</td>				<td width="4%" valign="top">0</td>				<td width="7%" valign="top">513</td>				<td width="6%" valign="top">20</td>				<td width="13%" valign="top">3 1</td>				<td width="62%" valign="top">; Bartlett</td>			</tr>			<tr>				<td width="8%" valign="top">f 43</td>				<td width="4%" valign="top">0</td>				<td width="7%" valign="top">513</td>				<td width="6%" valign="top">20</td>				<td width="13%" valign="top">4 1</td>				<td width="62%" valign="top">; Blackman</td>			</tr>			<tr>				<td width="8%" valign="top">f 44</td>				<td width="4%" valign="top">0</td>				<td width="7%" valign="top">513</td>				<td width="6%" valign="top">20</td>				<td width="13%" valign="top">5 1</td>				<td width="62%" valign="top">; Blackman-Harris</td>			</tr>			<tr>				<td width="8%" valign="top">f 45</td>				<td width="4%" valign="top">0</td>				<td width="7%" valign="top">513</td>				<td width="6%" valign="top">20</td>				<td width="13%" valign="top">6 1</td>				<td width="62%" valign="top">; Guassian</td>			</tr>			<tr>				<td width="8%" valign="top">f 46</td>				<td width="4%" valign="top">0</td>				<td width="7%" valign="top">513</td>				<td width="6%" valign="top">20</td>				<td width="13%" valign="top">7 1.75</td>				<td width="62%" valign="top">; Kaiser</td>			</tr>			<tr>				<td width="8%" valign="top">f 47</td>				<td width="4%" valign="top">0</td>				<td width="7%" valign="top">513</td>				<td width="6%" valign="top">20</td>				<td width="13%" valign="top">8 1</td>				<td width="62%" valign="top">; Rectangle</td>			</tr>			<tr>				<td width="8%" valign="top">f 48</td>				<td width="4%" valign="top">0</td>				<td width="7%" valign="top">513</td>				<td width="6%" valign="top">20</td>				<td width="13%" valign="top">9 1</td>				<td width="62%" valign="top">; Sinc</td>			</tr>		</table>		</p>		<p><b>Figure 2.42</b> F-table code for generating standard window functions using GEN20 as shown in figure 2.41.</p>		<p><b>Random Distributions with <a href="../../../2%20CD1/Reference/Manual4.0/gen/GEN21.htm">GEN21</a></b></p>		<p>In Csound, the GEN21 subroutine enables the creation of a variety of f-tables with random distributions. The <i>p5</i> values in GEN21 f-statements define different types of random distributions. Values of 1 through 11 in <i>p5</i> correspond to Uniform, Linear, Triangular, Exponential, Biexponential, Guassian, Cauchy, Positive Cauchy, Beta, Weibull and Poisson distributions. Like GEN20, the <i>p6</i> values in GEN21 f-statement define the peak table value. The Beta and Weibull distributions require two and one additional parameters respectively. A thorough explanation of these random distributions and suggestions for their compositional applications are found in Dodge and Jerse's <i>Computer Music</i> (Dodge and Jerse 1985). Figure 2.43 shows the f-table display and figure 2.44 defines the corresponding score code for f-statements defining each of the GEN21 random distribution types.</p>		<p><img src="Image29.gif" width="572" height="279" hspace="9"></p>		<p><b>Figure 2.43</b> F-table displays for random distributions generated using GEN21: Uniform (<i>f 49</i>), Linear (<i>f 50</i>), Triangular (<i>f 51</i>), Exponential (<i>f 52</i>), Bi-exponential (<i>f 53</i>), Gaussian (<i>f 54</i>), Cauchy (<i>f 55</i>), Positive Cauchy (<i>f 56</i>), Beta (<i>f 57</i>), Weibull (<i>f 58</i>), Poisson (<i>f 59</i>).</p>		<p>		<table cellspacing="0" border="0" width="473">			<tr>				<td width="9%" valign="top">f 49</td>				<td width="5%" valign="top">0</td>				<td width="8%" valign="top">513</td>				<td width="7%" valign="top">21</td>				<td width="15%" valign="top">1 1</td>				<td width="57%" valign="top">; Uniform</td>			</tr>			<tr>				<td width="9%" valign="top">f 50</td>				<td width="5%" valign="top">0</td>				<td width="8%" valign="top">513</td>				<td width="7%" valign="top">21</td>				<td width="15%" valign="top">2 1</td>				<td width="57%" valign="top">; Linear</td>			</tr>			<tr>				<td width="9%" valign="top">f 51</td>				<td width="5%" valign="top">0</td>				<td width="8%" valign="top">513</td>				<td width="7%" valign="top">21</td>				<td width="15%" valign="top">3 1</td>				<td width="57%" valign="top">; Triangular</td>			</tr>			<tr>				<td width="9%" valign="top">f 52</td>				<td width="5%" valign="top">0</td>				<td width="8%" valign="top">513</td>				<td width="7%" valign="top">21</td>				<td width="15%" valign="top">4 1</td>				<td width="57%" valign="top">; Exponential</td>			</tr>			<tr>				<td width="9%" valign="top">f 53</td>				<td width="5%" valign="top">0</td>				<td width="8%" valign="top">513</td>				<td width="7%" valign="top">21</td>				<td width="15%" valign="top">5 1</td>				<td width="57%" valign="top">; Biexponential</td>			</tr>			<tr>				<td width="9%" valign="top">f 54</td>				<td width="5%" valign="top">0</td>				<td width="8%" valign="top">513</td>				<td width="7%" valign="top">21</td>				<td width="15%" valign="top">6 1</td>				<td width="57%" valign="top">; Guassian</td>			</tr>			<tr>				<td width="9%" valign="top">f 55</td>				<td width="5%" valign="top">0</td>				<td width="8%" valign="top">513</td>				<td width="7%" valign="top">21</td>				<td width="15%" valign="top">7 1</td>				<td width="57%" valign="top">; Cauchy</td>			</tr>			<tr>				<td width="9%" valign="top">f 56</td>				<td width="5%" valign="top">0</td>				<td width="8%" valign="top">513</td>				<td width="7%" valign="top">21</td>				<td width="15%" valign="top">8 1</td>				<td width="57%" valign="top">; Positive Cauchy</td>			</tr>			<tr>				<td width="9%" valign="top">f 57</td>				<td width="5%" valign="top">0</td>				<td width="8%" valign="top">513</td>				<td width="7%" valign="top">21</td>				<td width="15%" valign="top">9 1 1 2</td>				<td width="57%" valign="top">; Beta</td>			</tr>			<tr>				<td width="9%" valign="top">f 58</td>				<td width="5%" valign="top">0</td>				<td width="8%" valign="top">513</td>				<td width="7%" valign="top">21</td>				<td width="15%" valign="top">10 1 2</td>				<td width="57%" valign="top">; Weibull</td>			</tr>			<tr>				<td width="9%" valign="top">f 59</td>				<td width="5%" valign="top">0</td>				<td width="8%" valign="top">513</td>				<td width="7%" valign="top">21</td>				<td width="15%" valign="top">11 1</td>				<td width="57%" valign="top">; Poisson</td>			</tr>		</table>		</p>		<p><b>Figure 2.44</b> F-table code for generating various random distributions.</p>		<p><b>Three-Dimensional Tables for Wave Terrain Synthesis</b></p>		<p>The Csound GEN routines create two-dimensional f-tables for utilization in the majority of synthesis paradigms. However, three-dimensional tables are necessary for wave terrain synthesis. This synthesis technique generates audio waveforms by scanning three-dimensional tables using elliptical orbits through the table terrain. In three-dimensional tables, the axes are plotted as follows:</p>		<p>&#149; <i>x</i>-axis plotted left/right</p>		<p>&#149; <i>y</i>-axis plotted front/back</p>		<p>&#149; <i>z</i>-axis plotted top/bottom</p>		<p>Wave terrain synthesis utilizes indexes for both the <i>x </i>and <i>y </i>axes and the resultant <i>z</i>-axis values create the actual waveform. This is analogous to tracking the height of a large ball rolling around in a hilly landscape.</p>		<p>By altering the orbit pattern or moving it across the terrain throughout the duration of a note, the waveform can be transformed radically. Moreover, wave terrains that maintain <i>z</i>-axis values of 0 around their entire perimeter are of particular interest for wave terrain synthesis. The family of three-dimensional f-tables exhibiting this special property allow index orbits to traverse multiple copies of the table without waveform discontinuities. As an orbit departs one table edge, it can smoothly re-enter at the same point on the opposite table edge. This can be visualized as an elliptical orbit crossing multiple copies of a wave terrain placed next to each other like floor tiles. As an orbit amplitude increases to traverse multiple tables, the sonic transformation includes both a timbre change and an ascending pitch.</p>		<p>Although this synthesis model provides an efficient and powerful means of generating dynamic waveforms, wave terrain synthesis remains relatively unexplored. A comprehensive bibliography of the technique includes four articles and a description of the technique in Road&#146;s <i>Computer Music Tutorial</i> (Bischoff 1978, Borgonovo 1984 and 1986, Mitsuhashi 1982 and Roads 1996).</p>		<p>Although the Csound GEN routines make two-dimensional f-tables, it is possible to create three-dimensional functions by multiplying the outputs of two discretely scanned f-tables representing the <i>x </i>and <i>y</i> axes. The flowchart in figure 2.45 and the accompanying orchestra code in figure 2.46 provide an example of a wave terrain synthesis instrument.</p>		<p><img src="Image30.gif" width="530" height="378"></p>		<p><b>Figure 2.45 </b>Block diagram of <i>instr 210, </i>a wave terrain synthesis instrument for scanning 3D function tables.</p>		<p>		<table cellspacing="0" border="0" width="475">			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td width="11%" valign="top"><font size="1">instr</font></td>				<td width="15%" valign="top"><a href="../../Book%20Instruments/02/210/210.html"><font size="1">210</font></a></td>				<td valign="top" colspan="2"><font size="1">; 3D wave terrain</font></td>			</tr>			<tr>				<td width="13%" valign="top">kenv</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/sigmod/linen.htm">linen</a></td>				<td valign="top" colspan="2">p4, .02, p3, .02</td>				<td width="36%" valign="top">; amp envelope</td>			</tr>			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td width="11%" valign="top">&nbsp;</td>				<td valign="top" colspan="2">&nbsp;</td>				<td width="36%" valign="top">; x index values:</td>			</tr>			<tr>				<td width="13%" valign="top">kxtrans</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">line</a></td>				<td valign="top" colspan="2">p5, p3, p6</td>				<td width="36%" valign="top">; transverse x movement</td>			</tr>			<tr>				<td width="13%" valign="top">kxamp</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">line</a></td>				<td valign="top" colspan="2">p7, p3, p8</td>				<td width="36%" valign="top">; index oscillator amp</td>			</tr>			<tr>				<td width="13%" valign="top">kxamp</td>				<td width="11%" valign="top">=</td>				<td valign="top" colspan="2">kxamp*.5</td>				<td width="36%" valign="top">; scales xamp</td>			</tr>			<tr>				<td width="13%" valign="top">kxfreq</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">line</a></td>				<td valign="top" colspan="2">p9, p3, p10</td>				<td width="36%" valign="top">; x index oscil frequency</td>			</tr>			<tr>				<td width="13%" valign="top">kxndx</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/oscil.htm">oscili</a></td>				<td valign="top" colspan="2">kxamp, kxfreq, p11</td>				<td width="36%" valign="top">; p11=x index function</td>			</tr>			<tr>				<td width="13%" valign="top">kxndx</td>				<td width="11%" valign="top">=</td>				<td valign="top" colspan="2">frac(kxndx+1000.5+kxtrans)</td>				<td width="36%" valign="top">; fractional values only</td>			</tr>			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td width="11%" valign="top">&nbsp;</td>				<td valign="top" colspan="2">&nbsp;</td>				<td width="36%" valign="top">; y index values:</td>			</tr>			<tr>				<td width="13%" valign="top">kytrans</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">line</a></td>				<td valign="top" colspan="2">p12, p3, p13</td>				<td width="36%" valign="top">; transverse y movement</td>			</tr>			<tr>				<td width="13%" valign="top">kyamp</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">line</a></td>				<td valign="top" colspan="2">p14, p3, p15</td>				<td width="36%" valign="top">; index oscillator amp</td>			</tr>			<tr>				<td width="13%" valign="top">kyamp</td>				<td width="11%" valign="top">=</td>				<td valign="top" colspan="2">kyamp*.5</td>				<td width="36%" valign="top">; scales yamp</td>			</tr>			<tr>				<td width="13%" valign="top">kyfreq</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/line.htm">line</a></td>				<td valign="top" colspan="2">p16, p3, p17</td>				<td width="36%" valign="top">; y index oscil frequency</td>			</tr>			<tr>				<td width="13%" valign="top">kyndx</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/oscil.htm">oscili</a></td>				<td valign="top" colspan="2">kyamp, kyfreq, p18</td>				<td width="36%" valign="top">; p18=y index function</td>			</tr>			<tr>				<td width="13%" valign="top">kyndx</td>				<td width="11%" valign="top">=</td>				<td valign="top" colspan="2">frac(kyndx+1000.5+kytrans)</td>				<td width="36%" valign="top">; fractional values only</td>			</tr>			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td width="11%" valign="top">&nbsp;</td>				<td valign="top" colspan="2">&nbsp;</td>				<td width="36%" valign="top">; audio:</td>			</tr>			<tr>				<td width="13%" valign="top">ax</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm">tablei</a></td>				<td valign="top" colspan="2">kxndx, p19, 1, 0, 0</td>				<td width="36%" valign="top">; p19=x function</td>			</tr>			<tr>				<td width="13%" valign="top">ay</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm">tablei</a></td>				<td valign="top" colspan="2">kyndx, p20, 1, 0, 0</td>				<td width="36%" valign="top">; p20=y function</td>			</tr>			<tr>				<td width="13%" valign="top">az</td>				<td width="11%" valign="top">=</td>				<td valign="top" colspan="2">(ax*ay)*kenv</td>				<td width="36%" valign="top">; z-axis terrain waveform</td>			</tr>			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td width="11%" valign="top"><a href="../../../2%20CD1/Reference/Manual4.0/sigio/in.htm">out</a></td>				<td valign="top" colspan="3">az</td>			</tr>			<tr>				<td width="13%" valign="top">&nbsp;</td>				<td valign="top" colspan="4">endin</td>			</tr>		</table>		</p>		<p><b>Figure 2.46</b> Orchestral code for <i>instr 210</i>, a 3D wave terrain synthesizer.</p>		<p>&#149; The wave terrain instrument illustrated in Instrument 210&#146;s i-statements need to include the following parameters:</p>		<p>&#149; <i>p4</i> = amp<br>		&#149; <i>p5-6</i> = <i>xtransverse</i> init &#151; final<br>		&#149; <i>p7-8</i> = <i>xoscil</i> amplitude init &#151; final<br>		&#149; <i>p9-10</i> = <i>xoscil</i> frequency init &#151; final<br>		&#149; <i>p11</i> = xfn<br>		&#149; <i>p12-13</i> = <i>ytransverse</i> init &#151; final<br>		&#149; <i>p14-15</i> = <i>yoscil</i> amplitude init &#151; final<br>		&#149; <i>p16-17</i> = <i>yoscil</i> frequency init &#151; final<br>		&#149; <i>p18</i> = yfn<br>		&#149; <i>p19</i> = <i>x</i>-axis f-table<br>		&#149; <i>p20</i> = <i>y</i>-axis f-table</p>		<p><img src="Image31.gif" width="284" height="200" hspace="9"></p>		<p>&nbsp;</p>		<p><b>Figure 2.47</b> F-table displays for x and y coordinates of simple and complex wave terrains as defined in figure 2.48.</p>		<p>		<table cellspacing="0" border="0" width="473">			<tr>				<td width="9%" valign="top">f 61</td>				<td width="5%" valign="top">0</td>				<td width="9%" valign="top">8192</td>				<td width="10%" valign="top">10</td>				<td width="68%" valign="top">0 0 1</td>			</tr>			<tr>				<td width="9%" valign="top">f 62</td>				<td width="5%" valign="top">0</td>				<td width="9%" valign="top">8192</td>				<td width="10%" valign="top">10</td>				<td width="68%" valign="top">1 .43 0 .25 .33 .11 0 .75</td>			</tr>			<tr>				<td width="9%" valign="top">f 63</td>				<td width="5%" valign="top">0</td>				<td width="9%" valign="top">8192</td>				<td width="10%" valign="top">9</td>				<td width="68%" valign="top">1 1 0 1.5 1 0</td>			</tr>			<tr>				<td width="9%" valign="top">f 64</td>				<td width="5%" valign="top">0</td>				<td width="9%" valign="top">8192</td>				<td width="10%" valign="top">9</td>				<td width="68%" valign="top">3 1 0 3.5 1 0</td>			</tr>		</table>		</p>		<p><b>Figure 2.48</b> F-table code for generating the x and y axis coordinates of simple and complex wave terrains.</p>		<p>In this instrument, the <i>x</i> and <i>y</i> f-tables must have endpoint values of 0 in order to facilitate traversing multiple tables. In addition, the <i>x</i> and <i>y</i> f-tables should both be post-normalized by using positive <i>p4 </i>f-statement values. With absolute peak values of 1, the <i>x</i> and <i>y</i> f-table outputs can be multiplied to generate <i>z</i>-axis values. Following figure provides graphic representations of several three-dimensional table recipes that result from multiplying the <i>x</i> and <i>y</i>-axis f-table data.</p>		<p>The <a href="../../../2%20CD1/Reference/Manual4.0/siggen/table.htm"><b>tablei</b></a> opcodes that scan these <i>x</i> and <i>y</i> tables should also have their <i>ixmode</i> argument set to 1, normalizing the indexes to scan the entire table with values from 0 to 1 rather than 0 through the f-table length.</p>		<p><img src="Image32.gif" width="720" height="1116" hspace="9"></p>		<p>&nbsp;</p>		<p><b>Figure 2.49</b> Simple and complex wave terrain realized by modulating two f-tables.</p>		<p>Using a normalized index with fractional values enables wave terrain orbits to easily scan across multiple tables as the <i>x</i> and <i>y</i> orbit amplitudes exceed values of 1. This fractional value is derived from the addition of the index function, transverse value and 1000.5, which provides an offset of .5 while avoiding negative values for any index amplitude less than 1000. Altering the frequency or amplitude values for the <i>x</i> or <i>y</i> oscillators or adding transverse movement in either the <i>x</i> or <i>y</i> axes will result in sonic transformations. An elliptical orbit is attained in this instrument by using synchronized cosine and sine pairs for the <i>x</i> and <i>y</i> axis indexes. However, other indexes such as triangle, sawtooth, linear, exponential, or other functions will alter the sonic result.</p>		<p>The sonic result of wave terrain synthesis is similar to amplitude modulation. Although the two techniques display similarities, classical AM synthesis uses static waveforms while the moving elliptical <i>x</i> and <i>y</i> f-table indexes provide greater dynamism in wave terrain synthesis. Adding a w-axis f-table with a unique index to create a four-dimensional wave terrain f-table can extend the wave terrain model provided above. Furthermore, utilizing additional axes with independent indexes creates wave terrains with many dimensions.</p>		<p><b>Conclusion</b></p>		<p>Csound's GEN routines provide an ample assortment of function generators to serve every computer musicians needs. By providing a number of diverse example instruments that use f-tables, this tutorial serves as a basis for further exploration, study and design. In particular, the model for generating three-dimensional wave terrain synthesis f-tables forges a path for further research in this synthesis technique. Learning to generate and utilize Csound's wide variety of f-tables provides one of the keys to successfully synthesizing and manipulating sound. With the Csound GEN routines, the multitude of possible functions and their applications are virtually limitless.</p>		<p><b>References</b></p>		<p>Bischoff, J., R. Gold and J. Horton. 1978. &quot;A microcomputer-based network for live</p>		<p>performance.&quot; <i>Computer Music Journal </i>2(3): 24-29. Revised and updated version in C. Roads and J. Strawn, eds. 1985. <i>Foundations of Computer Music.</i> Cambridge, Massachusetts, M.I.T. Press.</p>		<p>Borgonovo, A. and G. Haus. 1984. &quot;Musical sound synthesis by means of two-variable functions: experimental criteria and results.&quot; in D. Wessel, ed. <i>Proceedings of the 1984 International Computer Music Conference. </i>San Francisco: International Computer Music Association. pp. 35-42.</p>		<p>Borgonovo, A. and G. Haus. 1986. &quot;Sound synthesis by means of two-variable functions: experimental criteria and results.&quot; <i>Computer Music Journal </i>10(4): 57-71.</p>		<p>Dodge, C., and T. Jerse. 1985. <i>Computer Music</i>. New York: Schirmer Books.</p>		<p>LeBrun, M. 1979. &quot;Digital waveshaping synthesis.&quot; <i>Journal of the Audio Engineering Society</i> 27(4): 250-265.</p>		<p>Mackenzie, J. 1996. &quot;Using strange attractors to model sound.&quot; in Clifford Pickover, ed. <i>Fractal Horizons: The Future Use of Fractals</i>. New York: St. Martin's Press. pp. 225-247.</p>		<p>Mackenzie, J. 1995. &quot;Chaotic predictive modeling of sound.&quot; in <i>ICMC Proceedings 1995.</i> San Francisco: International Computer Music Association.</p>		<p>Mitsuhashi, Y. 1982. &quot;Audio signal synthesis by functions of two variables.&quot; <i>Journal of the Audio Engineering Society </i>30(10): 701-706.</p>		<p>Palamin, J.P. and P. Palamin. 1988. &quot;A method of generating and controlling musical asymmetric spectra.&quot; <i>Journal of the Audio Engineering Society</i> 36(9): 671-685.</p>		<p>Roads, C. 1996. <i>The Computer Music Tutorial</i>. Cambridge, Massachusetts: M.I.T. Press.	</body></html>